import{ai as V,aj as l,am as e,av as R,ap as r,ao as q,au as b,bX as W,b7 as Z,by as J,aq as H,ar as X,bi as K,bZ as Q,b_ as Y,bA as ee,aA as T,aB as ae,aC as re,b$ as te}from"./index-15348b98.js";import{F as ie}from"./filter-1b5cfb2e.js";const oe=({product:g={id:"1",name:"Premium Product",description:"A high-quality product with exceptional features and modern design.",price:99.99,image:{src:{medium:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&q=80"}}},theme:d={primaryColor:"#3B82F6"},index:p=0,storeName:n,storeId:s="default",isPublishedView:c=!1,displayMode:S="grid"})=>{var E,A,L,z,F;const{addToCart:h,updateStore:w,currentStore:m}=V(),[t,v]=l.useState(g);l.useEffect(()=>{v(g)},[g]);const[j,x]=l.useState(!1),[N,$]=l.useState(!1),[i,o]=l.useState(!1),u=!c,C=a=>typeof a=="string"&&a.startsWith("gid://shopify/"),y=t.id,O=C(y)?btoa(y):y,f=t.inventory_count,M=a=>{a.stopPropagation(),a.preventDefault(),h&&(f===void 0||f>0)&&h({...t,storeId:s,quantity:1})},I={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15,delay:p*.1}}},_={hover:{scale:1.1,transition:{duration:.6,ease:"easeOut"}}},B={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},D=a=>{a.stopPropagation(),a.preventDefault(),o(!0)},U=()=>{o(!1)},G=async a=>{if(s&&y)try{if(await fetch("https://uwbrgokfgelgxeonoqah.supabase.co/functions/v1/manage-product",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("supabase.auth.token")}`},body:JSON.stringify({store_id:s,product_id:y,...a})}),v(k=>({...k,...a})),m&&m.id===s&&m.products){const k=m.products.map(P=>P.id===y?{...P,...a}:P);w(s,{products:k})}else m&&m.id===s&&!m.products&&w(s,{products:[{...t,...a}]});o(!1)}catch(k){console.error("Failed to save product changes:",k)}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{to:`/${n}/product/${O}`,children:e.jsxs(r.div,{className:"group relative bg-white/10 dark:bg-black/10 backdrop-blur-md overflow-hidden shadow-glass hover:shadow-float transition-all duration-700 border border-white/20 dark:border-white/10 hover:border-primary/30",variants:I,initial:"hidden",animate:"visible",whileHover:{y:-8,scale:1.02},onHoverStart:()=>x(!0),onHoverEnd:()=>x(!1),style:{borderColor:j?`${d.primaryColor}50`:void 0},children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-white/5 to-white/10 dark:from-black/5 dark:to-black/10",children:[e.jsx(r.img,{src:((A=(E=t.image)==null?void 0:E.src)==null?void 0:A.medium)||((z=(L=t.image)==null?void 0:L.src)==null?void 0:z.large)||(Array.isArray(t.images)&&t.images.length>0?t.images[0]:`https://via.placeholder.com/400x400.png?text=${encodeURIComponent(t.name)}`),alt:t.name,className:"w-full h-full object-cover",variants:_,whileHover:"hover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx(q,{children:j&&e.jsxs(r.div,{className:"absolute top-4 right-4 flex flex-col gap-3",variants:B,initial:"hidden",animate:"visible",exit:"hidden",children:[e.jsx(b,{variant:"outline",size:"icon",className:"bg-white/20 dark:bg-black/20 hover:bg-white/30 dark:hover:bg-black/30 text-white border-white/30 dark:border-white/20 backdrop-blur-md shadow-glass",children:e.jsx(W,{className:"h-5 w-5"})}),e.jsx(b,{variant:"outline",size:"icon",className:"bg-white/20 dark:bg-black/20 hover:bg-white/30 dark:hover:bg-black/30 text-white border-white/30 dark:border-white/20 backdrop-blur-md shadow-glass",onClick:a=>{a.stopPropagation(),a.preventDefault(),$(!N)},children:e.jsx(Z,{className:`h-5 w-5 ${N?"fill-red-500 text-red-500":""}`})})]})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs(J,{className:"bg-white/20 dark:bg-black/20 text-primary text-xs font-inter tracking-wide backdrop-blur-md border border-white/30 dark:border-white/20",children:[e.jsx(H,{className:"w-3 h-3 mr-1"}),"Premium"]})}),e.jsx(r.div,{className:"absolute -top-2 -right-2 w-8 h-8 bg-primary/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:4,repeat:1/0},style:{backgroundColor:`${d.primaryColor}30`}})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-lg text-foreground line-clamp-2 font-inter tracking-tight group-hover:text-primary transition-colors duration-300",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 font-inter leading-relaxed",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(a=>e.jsx(X,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},a))}),e.jsx("span",{className:"text-xs text-muted-foreground font-inter",children:"(4.9)"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold font-inter",style:{color:d.primaryColor},children:["$",((F=t.price)==null?void 0:F.toFixed(2))||"0.00"]}),e.jsx(r.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(b,{onClick:M,size:"sm",className:"bg-white/10 dark:bg-black/10 hover:bg-white/20 dark:hover:bg-black/20 text-foreground border border-white/20 dark:border-white/10 backdrop-blur-md font-inter tracking-wide shadow-glass hover:shadow-float transition-all duration-300",style:{borderColor:`${d.primaryColor}40`,color:d.primaryColor},disabled:f!==void 0&&f<=0,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),f!==void 0&&f<=0?"Out of Stock":"Add"]})})]})]}),e.jsx(r.div,{className:"absolute inset-0 bg-gradient-to-t from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none",style:{background:`linear-gradient(to top, ${d.primaryColor}10, transparent)`}}),e.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-l-[20px] border-l-transparent border-b-[20px] border-b-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0 border-r-[20px] border-r-transparent border-t-[20px] border-t-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u&&e.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:e.jsx(r.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(b,{onClick:D,size:"sm",className:"bg-white/20 dark:bg-black/20 hover:bg-white/30 dark:hover:bg-black/30 text-foreground border border-white/30 dark:border-white/20 backdrop-blur-md font-inter tracking-wide shadow-glass hover:shadow-float transition-all duration-300",style:{borderColor:`${d.primaryColor}60`,color:d.primaryColor},children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Edit"]})})})]})}),i&&e.jsx(Y,{product:t,isOpen:i,onClose:U,onSave:G,storeId:s,theme:d})]})},de=({store:g,isPublishedView:d=!1})=>{const{products:p,theme:n,id:s}=g,[c,S]=l.useState("grid"),[h,w]=l.useState(""),[m,t]=l.useState(p||[]),[v,j]=l.useState(!0),[x,N]=l.useState("all");if(l.useEffect(()=>{const i=setTimeout(()=>{j(!1)},1200);return()=>clearTimeout(i)},[]),l.useEffect(()=>{if(!p)return;let i=p;h.trim()!==""&&(i=i.filter(o=>{var u,C;return((u=o.name)==null?void 0:u.toLowerCase().includes(h.toLowerCase()))||((C=o.description)==null?void 0:C.toLowerCase().includes(h.toLowerCase()))})),x!=="all"&&(i=i.filter(o=>{var u;return((u=o.category)==null?void 0:u.toLowerCase())===x.toLowerCase()})),t(i)},[h,x,p]),!p||p.length===0)return e.jsx("section",{id:`products-${s}`,className:"py-24 container mx-auto px-6 text-center bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-slate-900 dark:via-gray-900 dark:to-blue-950",children:e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-white/10 dark:bg-black/10 backdrop-blur-md border border-white/20 dark:border-white/10 flex items-center justify-center mx-auto mb-8 shadow-glass",children:e.jsx(H,{className:"w-16 h-16 text-primary"})}),e.jsx("h2",{className:"text-5xl font-bold mb-6 font-inter tracking-tight text-foreground",children:"Premium Collection"}),e.jsx("p",{className:"text-muted-foreground text-xl font-inter leading-relaxed",children:"Our curated selection is being prepared. Discover extraordinary products coming soon!"})]})});const $=()=>e.jsxs("div",{className:"bg-white/10 dark:bg-black/10 backdrop-blur-md overflow-hidden shadow-glass hover:shadow-float transition-all duration-700 border border-white/20 dark:border-white/10",children:[e.jsx("div",{className:"aspect-square bg-white/5 dark:bg-black/5 animate-pulse relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 dark:via-black/10 to-transparent animate-shimmer"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-white/10 dark:bg-black/10 animate-pulse w-3/4"}),e.jsx("div",{className:"h-4 bg-white/10 dark:bg-black/10 animate-pulse w-1/2"}),e.jsx("div",{className:"h-8 bg-primary/20 animate-pulse w-1/3 mt-4"})]})]});return e.jsxs("section",{id:`products-${s}`,className:"py-24 bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-slate-900 dark:via-gray-900 dark:to-blue-950 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(r.div,{className:"absolute top-20 left-10 w-96 h-96 bg-primary/5 blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:12,repeat:1/0}}),e.jsx(r.div,{className:"absolute bottom-20 right-10 w-[500px] h-[500px] bg-secondary/5 blur-3xl",animate:{scale:[1.1,1,1.1],opacity:[.2,.4,.2]},transition:{duration:15,repeat:1/0}})]}),e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-20",children:[e.jsxs(r.div,{className:"inline-flex items-center gap-3 px-6 py-3 bg-white/10 dark:bg-black/10 backdrop-blur-md border border-white/20 dark:border-white/10 text-sm font-medium text-primary mb-8 shadow-glass",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},style:{color:n.primaryColor},children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{className:"font-inter tracking-wide",children:"Featured Collection"})]}),e.jsx("h2",{className:"text-5xl md:text-7xl font-black mb-8 tracking-tight font-inter",children:e.jsx("span",{className:"bg-gradient-to-r from-foreground via-primary to-foreground bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(135deg, currentColor 0%, ${n.primaryColor} 50%, currentColor 100%)`,backgroundSize:"200% auto"},children:"Premium Products"})}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto text-xl md:text-2xl leading-relaxed font-inter",children:"Discover our carefully curated selection of premium products, designed for those who appreciate quality and innovation."})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex flex-col lg:flex-row justify-between items-center mb-16 gap-8",children:[e.jsxs("div",{className:"relative w-full lg:w-1/2 max-w-lg",children:[e.jsx(T,{className:"absolute left-6 top-1/2 transform -translate-y-1/2 text-muted-foreground h-6 w-6"}),e.jsx("input",{type:"text",placeholder:"Search premium products...",className:"w-full pl-16 pr-6 py-4 border border-white/20 dark:border-white/10 focus:outline-none focus:border-primary/50 bg-white/10 dark:bg-black/10 backdrop-blur-md transition-all duration-300 text-foreground placeholder-muted-foreground font-inter text-lg",style:{borderColor:`${n.primaryColor}30`},value:h,onChange:i=>w(i.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 dark:bg-black/10 backdrop-blur-md p-1 border border-white/20 dark:border-white/10",children:[e.jsx(b,{variant:"ghost",size:"icon",className:`transition-all duration-300 ${c==="grid"?"bg-white/20 dark:bg-black/20 text-primary shadow-glass":"text-muted-foreground hover:text-primary"}`,onClick:()=>S("grid"),style:{color:c==="grid"?n.primaryColor:void 0},children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx(b,{variant:"ghost",size:"icon",className:`transition-all duration-300 ${c==="list"?"bg-white/20 dark:bg-black/20 text-primary shadow-glass":"text-muted-foreground hover:text-primary"}`,onClick:()=>S("list"),style:{color:c==="list"?n.primaryColor:void 0},children:e.jsx(re,{className:"h-5 w-5"})})]}),e.jsxs(b,{variant:"outline",className:"gap-3 border border-white/20 dark:border-white/10 hover:border-primary/50 transition-all duration-300 text-muted-foreground hover:text-primary bg-white/10 dark:bg-black/10 backdrop-blur-md font-inter tracking-wide",style:{borderColor:`${n.primaryColor}30`},children:[e.jsx(ie,{className:"h-5 w-5"}),e.jsx("span",{children:"Filter"})]})]})]}),e.jsx(q,{mode:"wait",children:v?e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:c==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8":"space-y-8",children:Array(8).fill(0).map((i,o)=>e.jsx(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:o*.1},children:e.jsx($,{})},`skeleton-${o}`))},"loading"):e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{staggerChildren:.05},className:c==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8":"space-y-8",children:m.map((i,o)=>e.jsx(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:o*.05,type:"spring",stiffness:100,damping:15},className:c==="list"?"w-full":"",children:e.jsx(oe,{product:i,theme:n,index:o,storeName:te(g.name),storeId:s,isPublishedView:d,displayMode:c})},i.id||`product-${o}`))},"products")}),m.length===0&&!v&&e.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-24",children:[e.jsx("div",{className:"w-32 h-32 bg-white/10 dark:bg-black/10 backdrop-blur-md border border-white/20 dark:border-white/10 flex items-center justify-center mx-auto mb-8 shadow-glass",children:e.jsx(T,{className:"w-16 h-16 text-muted-foreground"})}),e.jsx("h3",{className:"text-3xl font-bold text-foreground mb-6 font-inter",children:"No products found"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-10 font-inter",children:"We couldn't find any products matching your search criteria."}),e.jsx(b,{onClick:()=>{w(""),N("all")},className:"bg-white/10 dark:bg-black/10 hover:bg-white/20 dark:hover:bg-black/20 text-foreground border border-white/20 dark:border-white/10 backdrop-blur-md px-10 py-4 text-lg font-medium font-inter tracking-wide shadow-glass hover:shadow-float transition-all duration-300",style:{borderColor:`${n.primaryColor}40`,color:n.primaryColor},children:"Clear Filters"})]})]})]})};export{de as default};
