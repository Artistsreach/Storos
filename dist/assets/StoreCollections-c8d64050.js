import{ai as E,aj as v,am as t,ap as p,aq as V,at as u,b4 as A,au as O,aw as q}from"./index-72b1491b.js";import{C as z}from"./CollectionProductsDialog-53668afe.js";const M=({collection:e,onCollectionClick:x,isAdmin:c,onSaveCollectionText:h,collectionIndex:g,primaryColor:m})=>{var l;const b="https://images.pexels.com/photos/1055691/pexels-photo-1055691.jpeg?auto=compress&cs=tinysrgb&w=600&q=80",d=(e==null?void 0:e.name)||"Unnamed Collection",n=(e==null?void 0:e.description)||`Explore our ${d} collection.`,o=((l=e==null?void 0:e.image)==null?void 0:l.src)||b,r=`Image for ${d}`;return t.jsxs(p.div,{className:"group relative block overflow-hidden rounded-2xl shadow-lg cursor-pointer border border-neutral-200/60 dark:border-neutral-700/60 bg-white/60 dark:bg-neutral-800/60 backdrop-blur-sm",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6,ease:[.25,.46,.45,.94]},onClick:()=>x(e),role:"button",tabIndex:0,onKeyDown:i=>i.key==="Enter"&&x(e),whileHover:{scale:1.03,y:-5,boxShadow:"0px 10px 20px rgba(0,0,0,0.1)"},children:[t.jsx("div",{className:"aspect-[4/3] overflow-hidden",children:t.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent opacity-80 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-5 md:p-6 text-white",children:[t.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-1 group-hover:underline",style:{textDecorationColor:m},children:t.jsx(u,{initialText:d,onSave:i=>h(g,"name",i),isAdmin:c,placeholder:"Collection Title",textClassName:"text-xl md:text-2xl font-bold",inputClassName:"bg-transparent text-white placeholder-gray-300"})}),t.jsx("p",{className:"mt-1 text-xs md:text-sm opacity-90 line-clamp-2",children:t.jsx(u,{initialText:n,onSave:i=>h(g,"description",i),isAdmin:c,placeholder:"Collection Description",useTextarea:!0,textClassName:"text-xs md:text-sm opacity-90",inputClassName:"bg-transparent text-gray-200 placeholder-gray-400 text-xs md:text-sm"})}),t.jsxs("div",{className:"mt-3 inline-flex items-center text-sm font-medium transition-colors",style:{color:m},children:["View Collection ",t.jsx(q,{className:"ml-1.5 h-4 w-4"})]})]})]})},K=({store:e,isPublishedView:x=!1})=>{var w;const{updateStore:c,viewMode:h}=E(),[g,m]=v.useState(!1),[b,d]=v.useState(null),n=e==null?void 0:e.collections,o=e==null?void 0:e.id,r=!x&&h==="edit",l=(e==null?void 0:e.content)||{},i=((w=e==null?void 0:e.theme)==null?void 0:w.primaryColor)||"#3B82F6",j=a=>{d(a),m(!0)},N=()=>{m(!1),d(null)},C=async(a,s)=>{if(o&&r)try{a==="freshCollectionsSectionTitle"?await c(o,{content:{...l,freshCollectionsSectionTitle:s}}):a==="freshCollectionsSectionSubtitle"?await c(o,{content:{...l,freshCollectionsSectionSubtitle:s}}):a==="freshCollectionsBadgeText"&&await c(o,{content:{...l,freshCollectionsBadgeText:s}})}catch(f){console.error(`Failed to update store ${a}:`,f)}},S=async(a,s,f)=>{if(o&&r&&n&&n[a]){const B=n.map((y,F)=>F===a?{...y,[s]:f}:y);try{await c(o,{collections:B})}catch(y){console.error(`Failed to update collection ${s} at index ${a}:`,y)}}},k=(l==null?void 0:l.freshCollectionsSectionTitle)||"Shop by Collection",T=(l==null?void 0:l.freshCollectionsSectionSubtitle)||"Explore our curated collections to find your perfect match.",I=(l==null?void 0:l.freshCollectionsBadgeText)||"Curated For You",$={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},D={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};return t.jsx(t.Fragment,{children:t.jsxs("section",{id:`fresh-collections-${(e==null?void 0:e.id)||"featured"}`,className:"py-16 md:py-24 bg-neutral-100 dark:bg-neutral-900 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-1/4 w-1/2 h-full bg-gradient-to-r from-primary/5 to-transparent -translate-x-1/2 blur-3xl opacity-30 dark:opacity-20",style:{backgroundColor:`${i}0A`}}),t.jsx("div",{className:"absolute bottom-0 right-1/4 w-1/2 h-full bg-gradient-to-l from-primary/5 to-transparent translate-x-1/2 blur-3xl opacity-30 dark:opacity-20",style:{backgroundColor:`${i}0A`}}),t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:[t.jsxs(p.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},className:"text-center mb-10 md:mb-14",children:[t.jsxs(p.div,{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium mb-4 border",style:{backgroundColor:`${i}1A`,color:i,borderColor:`${i}40`},initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},transition:{delay:.1,duration:.4},children:[t.jsx(V,{className:"w-4 h-4"}),t.jsx(u,{initialText:I,onSave:a=>C("freshCollectionsBadgeText",a),isAdmin:r,as:"span"})]}),t.jsx("h2",{className:"text-3xl md:text-5xl font-bold tracking-tight mb-3 text-neutral-800 dark:text-white",children:t.jsx(u,{initialText:k,onSave:a=>C("freshCollectionsSectionTitle",a),isAdmin:r,as:"span",textClassName:"text-3xl md:text-5xl font-bold tracking-tight text-neutral-800 dark:text-white",inputClassName:"text-3xl md:text-5xl font-bold tracking-tight text-neutral-800 dark:text-white bg-transparent"})}),t.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 max-w-xl mx-auto text-md md:text-lg leading-relaxed",children:t.jsx(u,{initialText:T,onSave:a=>C("freshCollectionsSectionSubtitle",a),isAdmin:r,as:"span",textClassName:"text-neutral-600 dark:text-neutral-300 max-w-xl mx-auto text-md md:text-lg leading-relaxed",inputClassName:"text-neutral-600 dark:text-neutral-300 max-w-xl mx-auto text-md md:text-lg leading-relaxed bg-transparent",useTextarea:!0})})]}),!n||n.length===0?t.jsxs("div",{className:"text-center py-10",children:[t.jsx(A,{className:"w-12 h-12 mx-auto mb-4 text-neutral-400 dark:text-neutral-500"}),t.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"No collections to display yet."}),!x&&t.jsx(O,{variant:"outline",className:"mt-4",children:"Manage Collections"})]}):t.jsx(p.div,{className:"grid grid-cols-1 gap-6 md:gap-8 sm:grid-cols-2 lg:grid-cols-3",variants:$,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},children:n.map((a,s)=>t.jsx(p.div,{variants:D,children:t.jsx(M,{collection:a,onCollectionClick:j,isAdmin:r,onSaveCollectionText:S,collectionIndex:s,primaryColor:i})},a.id||a.name||`fresh-coll-${s}`))})]}),b&&o&&t.jsx(z,{isOpen:g,onClose:N,collection:b,storeId:o})]})})};export{K as default};
