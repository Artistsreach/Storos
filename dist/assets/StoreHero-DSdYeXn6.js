import{r as o,j as e,D as de,g as me,h as he,k as ge,l as aa,T as ta,n as sa,o as oe,q as ne,L as ue,I as Y,s as J,B as g,t as ra,x as ia,y as la,Y as oa,a9 as na,aa as ee,ab as ca,ac as da,ad as ma,z as ae,F as q,ae as ha,H as ga,af as ce,ag as ua,ah as Le,ai as pa,aj as xa,O as Be,ak as fa,al as $e,am as va}from"./index-DQzOWQZE.js";import{P as ya}from"./pen-CVSJvuqS.js";const ba=({open:t,onOpenChange:x,storeId:y,currentVideoUrl:n,onVideoReplaced:d})=>{const[s,m]=o.useState("ai"),[p,R]=o.useState(""),[V,K]=o.useState(!1),[te,O]=o.useState(null),[_,b]=o.useState(""),[z,h]=o.useState([]),[k,F]=o.useState(!1),[f,N]=o.useState(null),[j,I]=o.useState(null),[H,w]=o.useState(null),[S,T]=o.useState(!1);o.useEffect(()=>{t&&(R(""),K(!1),O(null),b(""),h([]),F(!1),N(null),I(null),w(null),T(!1))},[t]);const v=async()=>{if(!p.trim()){O("Please enter a prompt for the video.");return}K(!0),O(null);try{console.log(`Generating video for store ${y} with prompt: "${p}"`);const r=await ra(p);d&&d(r),x(!1),R("")}catch(r){console.error("Error generating video with AI:",r),O(r.message||"Failed to generate video. Please try again.")}finally{K(!1)}},L=async()=>{if(!_.trim()){N("Please enter a search query for Pexels.");return}F(!0),N(null),h([]);try{const r=await ia(_);r.error?(N(r.error),h([])):(h(r.videos||[]),(r.videos||[]).length===0&&N("No videos found for your query."))}catch(r){console.error("Error searching Pexels videos:",r),N(r.message||"Failed to search Pexels. Please try again.")}finally{F(!1)}},E=r=>{d&&r?(d(r),x(!1)):N("Invalid video URL selected or replacement handler missing.")},se=r=>{const P=r.target.files[0];if(P){if(P.size>50*1024*1024){w("File is too large. Please select a video under 50MB."),I(null);return}if(!P.type.startsWith("video/")){w("Invalid file type. Please select a video file."),I(null);return}I(P),w(null)}},B=()=>{if(j&&d){T(!0),w(null);const r=new FileReader;r.onloadend=()=>{d(r.result),x(!1),I(null),T(!1)},r.onerror=()=>{w("Failed to read video file for upload."),T(!1)},r.readAsDataURL(j)}else w("No video file selected or replacement handler missing.")};return e.jsx(de,{open:t,onOpenChange:x,children:e.jsxs(me,{className:"sm:max-w-[672px]",children:[e.jsxs(he,{className:"text-left",children:[e.jsx(ge,{children:"Replace Hero Video"}),e.jsxs(aa,{className:"text-left",children:["Current video: ",e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline truncate block max-w-full",children:n||"No video set"})]})]}),e.jsxs(ta,{value:s,onValueChange:m,className:"w-full",children:[e.jsxs(sa,{className:"grid w-full grid-cols-3",children:[" ",e.jsx(oe,{value:"ai",children:"AI Generation (Veo)"}),e.jsx(oe,{value:"pexels",children:"Search Pexels"}),e.jsx(oe,{value:"upload",children:"Upload Video"})," "]}),e.jsxs(ne,{value:"ai",className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"aiPrompt",className:"text-left block mb-1",children:"AI Video Prompt"}),e.jsx(Y,{id:"aiPrompt",value:p,onChange:r=>R(r.target.value),placeholder:"e.g., A futuristic cityscape at sunset",disabled:V})]}),te&&e.jsx("p",{className:"text-sm text-red-500 text-center",children:te}),e.jsxs(J,{className:"justify-start pt-4",children:[e.jsx(g,{variant:"outline",onClick:()=>x(!1),disabled:V,children:"Cancel"}),e.jsx(g,{onClick:v,disabled:V||!p.trim(),children:V?"Generating...":"Generate Video"})]})]}),e.jsxs(ne,{value:"pexels",className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{id:"pexelsQuery",value:_,onChange:r=>b(r.target.value),placeholder:"e.g., Nature, Business, Technology",disabled:k,className:"flex-grow"}),e.jsx(g,{onClick:L,disabled:k||!_.trim(),children:k?"Searching...":"Search"})]}),f&&e.jsx("p",{className:"text-sm text-red-500 text-center",children:f}),k&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Loading Pexels videos..."}),!k&&z.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-[300px] overflow-y-auto pr-2",children:z.map(r=>e.jsxs("div",{className:"relative aspect-video rounded-md overflow-hidden cursor-pointer group border hover:border-primary",onClick:()=>E(r.videoUrl),children:[e.jsx("img",{src:r.imageUrl,alt:`Pexels video by ${r.photographer}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/50 transition-colors flex items-center justify-center",children:e.jsx("p",{className:"text-white text-xs text-center p-1 bg-black/50 rounded",children:"Use Video"})})]},r.id))}),e.jsx(J,{className:"justify-start pt-4",children:e.jsx(g,{variant:"outline",onClick:()=>x(!1),disabled:k,children:"Cancel"})})]}),e.jsxs(ne,{value:"upload",className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"video-upload-input",className:"text-left block mb-1",children:"Select Video File"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Y,{id:"video-upload-input",type:"file",accept:"video/*",onChange:se,className:"flex-grow",disabled:S})}),j&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Selected: ",j.name," (",(j.size/1024/1024).toFixed(2)," MB)"]}),H&&e.jsx("p",{className:"text-sm text-red-500 text-center mt-2",children:H})]}),e.jsxs(J,{className:"justify-start pt-4",children:[e.jsx(g,{variant:"outline",onClick:()=>x(!1),disabled:S,children:"Cancel"}),e.jsx(g,{onClick:B,disabled:S||!j,children:S?"Uploading...":"Confirm Upload"})]})]})]})]})})},Ca=({store:t,isPublishedView:x=!1})=>{var je,we,Ce,Ne,ke,Ie,Se,Te,Ee,Pe;const{name:y,theme:n,heroImage:d,content:s,id:m,hero_video_url:p,hero_video_poster_url:R,niche:V,description:K,targetAudience:te,style:O,template_version:_}=t,{updateStore:b,updateStoreTemplateVersion:z}=la(),{toast:h}=oa(),[k,F]=o.useState(!1),f=!x,[N,j]=o.useState(""),[I,H]=o.useState(""),[w,S]=o.useState(!1),T=((we=(je=t==null?void 0:t.theme)==null?void 0:je.heroConfig)==null?void 0:we.backgroundImage)||{src:{large:"https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},url:"https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"Default hero background"},[v,L]=o.useState(T),E=((Ce=v==null?void 0:v.src)==null?void 0:Ce.large)||(v==null?void 0:v.url)||"https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",[se,B]=o.useState(!1),[r,P]=o.useState(""),[G,X]=o.useState([]),[$,U]=o.useState(!1),[Me,re]=o.useState(!1),[M,pe]=o.useState(""),[ie,xe]=o.useState(!1);o.useEffect(()=>{var i,l,c,u;(t!=null&&t.niche||t!=null&&t.name)&&P(t.niche||t.name+" abstract background");const a=((l=(i=t==null?void 0:t.theme)==null?void 0:i.heroConfig)==null?void 0:l.backgroundImage)||T;((c=a==null?void 0:a.src)==null?void 0:c.large)!==((u=v==null?void 0:v.src)==null?void 0:u.large)&&L(a)},[(ke=(Ne=t==null?void 0:t.theme)==null?void 0:Ne.heroConfig)==null?void 0:ke.backgroundImage,t==null?void 0:t.niche,t==null?void 0:t.name]),o.useEffect(()=>{(async()=>{var l,c,u,A,C,Z,Ue,Ae,De,Fe;const i=!((c=(l=t==null?void 0:t.theme)==null?void 0:l.heroConfig)!=null&&c.backgroundImage)||((C=(A=(u=t==null?void 0:t.theme)==null?void 0:u.heroConfig)==null?void 0:A.backgroundImage)==null?void 0:C.url)==="https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"||!((Ue=(Z=t==null?void 0:t.theme)==null?void 0:Z.heroConfig)!=null&&Ue.backgroundImageUrl)||((De=(Ae=t==null?void 0:t.theme)==null?void 0:Ae.heroConfig)==null?void 0:De.backgroundImageUrl)==="https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1";if(m&&i&&(t.niche||t.name)){const He=`${t.niche||t.name} abstract background`;try{const Q=await $e(He,1,"landscape");if(Q&&Q.length>0){const D=Q[0],le={id:((Fe=D.id)==null?void 0:Fe.toString())||ee(),src:{large:D.src.large,medium:D.src.medium||D.src.large},url:D.src.large,alt:D.alt||He,photographer:D.photographer||"Pexels"},ea={...n,heroConfig:{...(n==null?void 0:n.heroConfig)||{},backgroundImage:le,backgroundImageUrl:le.src.large}};await b(m,{theme:ea}),L(le),h({title:"Hero Background Updated",description:"Set a relevant hero background from Pexels."})}}catch(Q){console.error("Error fetching initial Pexels image for hero:",Q)}}})()},[m,t==null?void 0:t.niche,t==null?void 0:t.name,(Se=(Ie=t==null?void 0:t.theme)==null?void 0:Ie.heroConfig)==null?void 0:Se.backgroundImage,(Ee=(Te=t==null?void 0:t.theme)==null?void 0:Te.heroConfig)==null?void 0:Ee.backgroundImageUrl,n,b,h]);const fe=o.useCallback(a=>new Promise((i,l)=>{if(!a)return l(new Error("Image source is undefined or null."));if(a.startsWith("data:"))try{const c=a.split(",");if(c.length<2)throw new Error("Invalid data URL structure.");const u=c[0],A=c[1],C=u.match(/:(.*?);/);if(!C||!C[1])throw new Error("Could not parse MIME type from data URL.");i({base64ImageData:A,mimeType:C[1]})}catch(c){l(new Error(`Invalid data URL format: ${c.message}`))}else{const c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{const u=document.createElement("canvas");u.width=c.naturalWidth,u.height=c.naturalHeight,u.getContext("2d").drawImage(c,0,0);try{const C=u.toDataURL("image/png"),[,Z]=C.split(",");i({base64ImageData:Z,mimeType:"image/png"})}catch(C){l(new Error("Canvas toDataURL failed: "+C.message))}},c.onerror=u=>l(new Error("Failed to load image from URL.")),c.src=a}}),[]),Re=async()=>{if(r.trim()){U(!0),X([]);try{const a=await $e(r,5,"landscape");X(a)}catch(a){h({title:"Image search failed",description:a.message,variant:"destructive"})}U(!1)}},Ve=async()=>{if(r.trim()){U(!0);try{const a=`Store hero background image for: ${r}, theme: ${(n==null?void 0:n.name)||"general e-commerce"}`,i=await va(a,"landscape");X(l=>[{id:Date.now().toString(),src:{medium:i.url,large:i.url},url:i.url,alt:i.alt,photographer:"Gemini AI"},...l.slice(0,4)]),h({title:"Image Generated",description:"Gemini AI generated an image."})}catch(a){h({title:"Gemini image generation failed",description:a.message,variant:"destructive"})}U(!1)}},Oe=a=>{const i=a.target.files[0];if(i){U(!0);const l=new FileReader;l.onloadend=()=>{const c={id:ee(),src:{medium:l.result,large:l.result},url:l.result,alt:i.name,photographer:"Uploaded by user"};ve(c),h({title:"Image Uploaded",description:`${i.name} has been set as the background image.`}),U(!1),B(!1)},l.onerror=()=>{h({title:"Upload Failed",description:"Could not read the selected file.",variant:"destructive"}),U(!1)},l.readAsDataURL(i)}},_e=async()=>{const a=(t==null?void 0:t.template_version)||"v2";a==="v2"&&(await z(m,"v1"),await new Promise(i=>setTimeout(i,2e3)),await z(m,a))},ve=async a=>{if(!m)return;const i={id:a.id||ee(),src:{large:a.src.large,medium:a.src.medium||a.src.large},url:a.src.large,alt:a.alt||r||"Hero Background Image",photographer:a.photographer||"Unknown"};try{const l={...n,heroConfig:{...(n==null?void 0:n.heroConfig)||{},backgroundImage:i,backgroundImageUrl:i.src.large}};await b(m,{theme:l}),L(i),h({title:"Background Image Updated",description:"The hero background image has been changed."}),B(!1),X([])}catch(l){console.error("Failed to update hero background image:",l),h({title:"Update Failed",description:"Could not save the new background image.",variant:"destructive"})}},ze=o.useCallback(async()=>{if(!M.trim()){h({title:"Missing data",description:"Original image or edit prompt is missing.",variant:"destructive"});return}xe(!0);try{const{base64ImageData:a,mimeType:i}=await fe(E),l=await na(a,i,M);if(l&&l.editedImageData){const c=`data:${l.newMimeType};base64,${l.editedImageData}`,u={id:ee(),src:{large:c,medium:c},url:c,alt:`Edited hero background: ${M.substring(0,30)}...`,photographer:"Edited with Gemini AI"},A={...n,heroConfig:{...(n==null?void 0:n.heroConfig)||{},backgroundImage:u,backgroundImageUrl:c}};await b(m,{theme:A}),L(u),h({title:"Background Image Edited",description:"Background image updated with AI edit."}),re(!1),pe("")}else throw new Error("AI did not return an edited image.")}catch(a){console.error("Error editing background image:",a),h({title:"Image Edit Failed",description:a.message,variant:"destructive"})}xe(!1)},[E,M,m,b,h,fe,n]);o.useEffect(()=>{if(t&&y){S(!0);const a={name:y,niche:t.niche||(s==null?void 0:s.niche),description:t.description||(s==null?void 0:s.description),targetAudience:t.targetAudience||(s==null?void 0:s.targetAudience),style:t.style||(s==null?void 0:s.style)};ca(a).then(i=>{i&&!i.error?(j(i.heroTitle),H(i.heroDescription)):(console.error("Failed to generate AI hero content:",i==null?void 0:i.error),j(""),H(""))}).catch(i=>{console.error("Error calling generateHeroContent:",i),j(""),H("")}).finally(()=>S(!1))}},[m,y,t.niche,t.description,t.targetAudience,t.style,s==null?void 0:s.niche,s==null?void 0:s.description,s==null?void 0:s.targetAudience,s==null?void 0:s.style]);const Ge=w?"Crafting something special...":(s==null?void 0:s.modernHeroTitle)||N||`Welcome to ${y}`,We=w?"Just a moment...":(s==null?void 0:s.modernHeroDescription)||I||`Explore ${y}, your destination for amazing products.`,Qe=(s==null?void 0:s.modernHeroPrimaryCtaText)||(s==null?void 0:s.heroPrimaryCtaText)||"Shop Collection",qe=(s==null?void 0:s.modernHeroSecondaryCtaText)||(s==null?void 0:s.heroSecondaryCtaText)||"Explore More",Ye=(s==null?void 0:s.modernHeroOverlaySubText)||(s==null?void 0:s.heroOverlaySubText)||"New Arrivals Daily",ye=((Pe=d==null?void 0:d.src)==null?void 0:Pe.large)||(d==null?void 0:d.url)||"https://via.placeholder.com/1200x800.png?text=Store+Image",Je=(d==null?void 0:d.alt)||(d==null?void 0:d.altText)||`${y} hero image`,Ke=R||ye,Xe=()=>F(!0),Ze=async a=>{if(m&&a)try{await b(m,{hero_video_url:a,hero_video_poster_url:""})}catch(i){console.error("Failed to update store with new video URL:",i)}},be=()=>{const a=document.getElementById(`products-${m}`);a&&a.scrollIntoView({behavior:"smooth"})},W=async(a,i)=>{if(m)try{await b(m,{content:{...s,[a]:i}}),await _e()}catch(l){console.error(`Failed to update store ${a}:`,l)}};return e.jsxs("section",{className:"relative overflow-hidden text-white bg-cover bg-center group",style:{backgroundImage:`url(${E})`},children:[f&&e.jsxs("div",{className:"absolute top-4 right-4 z-30 flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsxs(g,{variant:"secondary",size:"sm",onClick:()=>B(!0),className:"shadow-md",children:[e.jsx(da,{className:"mr-2 h-4 w-4"})," Change Image"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>re(!0),className:"shadow-md bg-background/70 hover:bg-background/90",children:[e.jsx(ma,{className:"mr-2 h-4 w-4"})," Edit Image"]})]}),e.jsx("div",{className:"absolute inset-0 hero-pattern opacity-10 dark:opacity-5"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-gradient-to-t from-background to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 py-20 md:py-32 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[e.jsxs(ae.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2,ease:"easeOut"},className:"space-y-6 text-center md:text-left",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight tracking-tight",style:{color:n.primaryColor},children:e.jsx(q,{as:"div",textClassName:"text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-extrabold leading-tight tracking-tight",initialText:Ge,onSave:a=>W("modernHeroTitle",a),isAdmin:f,placeholder:"Hero Title",useTextarea:!0})}),e.jsx("p",{className:"text-lg text-white max-w-lg mx-auto md:mx-0",children:e.jsx(q,{as:"div",textClassName:"text-lg text-white",initialText:We,onSave:a=>W("modernHeroDescription",a),isAdmin:f,placeholder:"Hero Description",useTextarea:!0})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center md:justify-start gap-4 pt-4",children:[e.jsxs(g,{size:"lg",className:"rounded shadow-lg hover:shadow-xl transition-all duration-300 hover:bg-opacity-80 transform hover:scale-105",style:{backgroundColor:n.primaryColor,color:"white"},onClick:be,children:[e.jsx(q,{as:"span",initialText:Qe,onSave:a=>W("modernHeroPrimaryCtaText",a),isAdmin:f,placeholder:"Shop Button"}),e.jsx(ha,{className:"ml-2 h-5 w-5"})]}),e.jsxs(g,{variant:"outline",size:"lg",className:"rounded shadow-sm hover:shadow-md transition-all duration-300 hover:text-white",style:{borderColor:n.primaryColor,color:n.primaryColor},onMouseEnter:a=>a.currentTarget.style.backgroundColor=n.primaryColor,onMouseLeave:a=>a.currentTarget.style.backgroundColor="transparent",onClick:be,children:[e.jsx(q,{as:"span",initialText:qe,onSave:a=>W("modernHeroSecondaryCtaText",a),isAdmin:f,placeholder:"Explore Button"}),e.jsx(ga,{className:"ml-2 h-5 w-5"})]})]})]}),e.jsxs(ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.4,type:"spring",stiffness:100},className:"relative group",children:[e.jsx("div",{className:"absolute -inset-2 rounded-md opacity-50 group-hover:opacity-70 transition-opacity duration-300",style:{background:`linear-gradient(45deg, ${n.secondaryColor||"#FF00FF"}, ${n.primaryColor||"#00FFFF"})`}}),e.jsxs("div",{className:"aspect-video md:aspect-[5/4] rounded-md overflow-hidden shadow-2xl relative z-10 transform group-hover:scale-105 transition-transform duration-300 bg-black",children:[!x&&p&&e.jsx(g,{variant:"outline",size:"icon",className:"absolute top-2 right-2 z-20 bg-background/70 hover:bg-background/90 text-foreground rounded",onClick:Xe,title:"Replace Video",children:e.jsx(ya,{className:"h-5 w-5"})}),p?e.jsx("video",{src:p,poster:Ke,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",onError:a=>console.error("Error playing video:",a),children:"Your browser does not support the video tag."},p):e.jsx("img",{alt:Je,className:"w-full h-full object-cover",src:ye}),e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"absolute bottom-4 left-4 right-4 md:left-auto md:bottom-4 md:right-4 md:w-auto bg-background/80 backdrop-blur-sm rounded p-4 shadow-xl z-20 hidden md:block",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded flex items-center justify-center text-white text-2xl font-bold",style:{backgroundColor:n.primaryColor},children:y.substring(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white",children:y}),e.jsx("p",{className:"text-sm text-indigo-200",children:e.jsx(q,{as:"span",textClassName:"text-sm text-indigo-200",initialText:Ye,onSave:a=>W("modernHeroOverlaySubText",a),isAdmin:f,placeholder:"Overlay Subtext"})})]})]})})]})]})]})}),!x&&p&&m&&e.jsx(ba,{open:k,onOpenChange:F,storeId:m,currentVideoUrl:p,onVideoReplaced:Ze}),f&&e.jsx(de,{open:se,onOpenChange:B,children:e.jsxs(me,{className:"sm:max-w-2xl",children:[e.jsx(he,{children:e.jsx(ge,{children:"Change Hero Background Image"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{placeholder:"Search Pexels or describe for AI...",value:r,onChange:a=>P(a.target.value)}),e.jsxs(g,{onClick:Re,disabled:$||!r.trim(),children:[$&&G.length===0?e.jsx(ce,{className:"h-4 w-4 animate-spin"}):e.jsx(ua,{className:"h-4 w-4"})," ",e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Pexels"})]}),e.jsxs(g,{onClick:Ve,variant:"outline",disabled:$||!r.trim(),children:[$&&G.length>0?e.jsx(ce,{className:"h-4 w-4 animate-spin"}):e.jsx(Le,{className:"h-4 w-4"})," ",e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Gemini"})]}),e.jsxs(g,{variant:"outline",onClick:()=>{var a;return(a=document.getElementById("upload-hero-bg-input"))==null?void 0:a.click()},disabled:$,children:[e.jsx(pa,{className:"h-4 w-4"})," ",e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Upload"})]}),e.jsx(Y,{type:"file",id:"upload-hero-bg-input",className:"hidden",accept:"image/*",onChange:Oe})]}),$&&G.length===0&&e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Searching for images or processing upload..."}),G.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-80 overflow-y-auto",children:G.map(a=>e.jsxs(ae.div,{className:"relative aspect-video rounded-md overflow-hidden cursor-pointer group border-2 border-transparent hover:border-primary transition-all",onClick:()=>ve(a),whileHover:{scale:1.05},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:[e.jsx("img",{src:a.src.medium,alt:a.alt||"Search result",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(xa,{className:"h-8 w-8 text-white"})}),e.jsx("p",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 truncate",children:a.photographer||a.alt})]},a.id))})]}),e.jsx(J,{children:e.jsx(Be,{asChild:!0,children:e.jsx(g,{type:"button",variant:"outline",children:"Cancel"})})})]})}),f&&e.jsx(de,{open:Me,onOpenChange:re,children:e.jsxs(me,{className:"sm:max-w-md",children:[e.jsx(he,{children:e.jsx(ge,{children:"Edit Hero Background Image"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("img",{src:E,alt:"Current background to edit",className:"h-20 w-auto object-contain rounded border"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Editing current background"})]}),e.jsx(ue,{htmlFor:"heroBgEditPrompt",className:"text-left",children:"Edit Instruction:"}),e.jsx(fa,{id:"heroBgEditPrompt",placeholder:"e.g., 'make the sky dramatic sunset colors', 'add a futuristic city skyline'",value:M,onChange:a=>pe(a.target.value),rows:3,className:"resize-none"})]}),e.jsxs(J,{children:[e.jsx(Be,{asChild:!0,children:e.jsx(g,{type:"button",variant:"outline",disabled:ie,children:"Cancel"})}),e.jsxs(g,{onClick:ze,disabled:ie||!M.trim(),children:[ie?e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Apply Edit"]})]})]})})]},E)};export{Ca as default};
