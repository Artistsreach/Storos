import{u as ee,r,j as e,aj as se,ak as ae,al as le,am as re,an as ie,ao as oe,ap as ne,aq as W,S as te,aG as de,aH as ce,ar as O,as as K,z as Q,at as Y,B as b,n as xe,au as me,av as ue,a as he,b as X,A as pe,m as g,a2 as Z,P as fe,I as B,d as ge,w as be}from"./index-440cc513.js";const ye=({open:d,onOpenChange:o,storeId:E,currentVideoUrl:V,onVideoReplaced:x})=>{var L;const{store:a}=ee(),i=((L=a==null?void 0:a.theme)==null?void 0:L.primaryColor)||"#3B82F6",[y,J]=r.useState("ai"),[m,A]=r.useState(""),[c,C]=r.useState(!1),[F,u]=r.useState(null),[N,D]=r.useState(""),[k,U]=r.useState(null),[h,T]=r.useState(!1),[$,p]=r.useState(null),[v,S]=r.useState(null),[M,f]=r.useState(null),[I,n]=r.useState(!1);r.useEffect(()=>{d&&(A(""),C(!1),u(null),D(""),U(null),T(!1),p(null),S(null),f(null),n(!1))},[d]);const j=async()=>{if(!m.trim()){u("Please enter a prompt.");return}C(!0),u(null);try{const t=await me(m);x&&x(t),o(!1),A("")}catch(t){u(t.message||"Failed to generate video.")}finally{C(!1)}},R=async()=>{if(!N.trim()){p("Please enter a search query.");return}T(!0),p(null),U(null);try{const t=await ue(N);t.error?p(t.error):t.video?U(t.video):p("No video found for your query.")}catch(t){p(t.message||"Failed to search Pexels.")}finally{T(!1)}},z=t=>{x&&t?(x(t),o(!1)):p("Invalid video URL or handler missing.")},q=t=>{const w=t.target.files[0];if(w){if(w.size>50*1024*1024){f("Max 50MB."),S(null);return}if(!w.type.startsWith("video/")){f("Invalid file type."),S(null);return}S(w),f(null)}},H=()=>{if(v&&x){n(!0),f(null);const t=new FileReader;t.onloadend=()=>{x(t.result),o(!1),S(null),n(!1)},t.onerror=()=>{f("Failed to read file."),n(!1)},t.readAsDataURL(v)}else f("No file or handler missing.")},P="w-full pl-3 pr-4 py-2.5 text-sm bg-white/70 dark:bg-slate-700/50 backdrop-blur-sm border-slate-300/70 dark:border-slate-600/70 rounded-xl focus:ring-primary/30 focus:border-primary/60 transition-colors text-slate-700 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",s="rounded-lg px-5 py-2.5 text-sm font-medium transition-all duration-200 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background dark:focus-visible:ring-offset-slate-800",l=`${s} text-white`,_=`${s} border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700`;return e.jsx(se,{open:d,onOpenChange:o,children:e.jsxs(ae,{className:"sm:max-w-[672px] bg-slate-50 dark:bg-slate-800/90 border-slate-200 dark:border-slate-700/80 rounded-xl shadow-2xl p-0",children:[e.jsxs(le,{className:"px-6 pt-6 pb-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsx(re,{className:"text-xl font-semibold text-slate-800 dark:text-white",children:"Replace Hero Media"}),e.jsxs(ie,{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Current: ",e.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"underline truncate block max-w-full",style:{color:i},children:V||"No media set"})]})]}),e.jsxs(oe,{value:y,onValueChange:J,className:"w-full px-6 pt-2 pb-6",children:[e.jsxs(ne,{className:"grid w-full grid-cols-3 bg-slate-100 dark:bg-slate-700/60 p-1 rounded-lg mb-4",children:[e.jsxs(W,{value:"ai",className:`flex items-center justify-center gap-2 text-xs sm:text-sm py-2 px-3 rounded-md transition-colors ${y==="ai"?"text-white shadow-sm":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,style:y==="ai"?{backgroundColor:i}:{},children:[e.jsx(te,{className:"w-4 h-4"})," AI Generate"]}),e.jsxs(W,{value:"pexels",className:`flex items-center justify-center gap-2 text-xs sm:text-sm py-2 px-3 rounded-md transition-colors ${y==="pexels"?"text-white shadow-sm":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,style:y==="pexels"?{backgroundColor:i}:{},children:[e.jsx(de,{className:"w-4 h-4"})," Pexels Video"]}),e.jsxs(W,{value:"upload",className:`flex items-center justify-center gap-2 text-xs sm:text-sm py-2 px-3 rounded-md transition-colors ${y==="upload"?"text-white shadow-sm":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,style:y==="upload"?{backgroundColor:i}:{},children:[e.jsx(ce,{className:"w-4 h-4"})," Upload"]})]}),e.jsxs(O,{value:"ai",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"aiPrompt",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"AI Video Prompt"}),e.jsx(Q,{id:"aiPrompt",value:m,onChange:t=>A(t.target.value),placeholder:"e.g., Serene beach with calm waves",disabled:c,className:P})]}),F&&e.jsx("p",{className:"text-xs text-red-500 text-center",children:F}),e.jsxs(Y,{className:"justify-start pt-2",children:[e.jsx(b,{className:_,onClick:()=>o(!1),disabled:c,children:"Cancel"}),e.jsx(b,{style:{backgroundColor:i},className:l,onClick:j,disabled:c||!m.trim(),children:c?"Generating...":"Generate Video"})]})]}),e.jsxs(O,{value:"pexels",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Q,{id:"pexelsQuery",value:N,onChange:t=>D(t.target.value),placeholder:"e.g., Nature, Business",disabled:h,className:`${P} flex-grow`}),e.jsx(b,{style:{backgroundColor:i},className:`${l} h-10`,onClick:R,disabled:h||!N.trim(),children:h?"Searching...":e.jsx(xe,{className:"w-4 h-4"})})]}),$&&e.jsx("p",{className:"text-xs text-red-500 text-center",children:$}),h&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:"Loading video..."}),!h&&k&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative aspect-video rounded-md overflow-hidden cursor-pointer group border-2 border-transparent hover:border-primary transition-all w-full max-w-md",onClick:()=>z(k.videoUrl),style:{"--hover-border-color":i},children:[e.jsx("img",{src:k.imageUrl,alt:`Pexels video by ${k.photographer}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx(Play,{className:"w-8 h-8 text-white"})})]})}),e.jsx(Y,{className:"justify-start pt-2",children:e.jsx(b,{className:_,onClick:()=>o(!1),disabled:h,children:"Cancel"})})]}),e.jsxs(O,{value:"upload",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"video-upload-input",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Select Video File (Max 50MB)"}),e.jsx(Q,{id:"video-upload-input",type:"file",accept:"video/*",onChange:q,className:`${P} file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary/10 dark:file:bg-primary/20 file:text-primary dark:file:text-primary-light hover:file:bg-primary/20 dark:hover:file:bg-primary/30`,style:{"--file-text-color":i},disabled:I}),v&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1.5",children:["Selected: ",v.name," (",(v.size/1024/1024).toFixed(2)," MB)"]}),M&&e.jsx("p",{className:"text-xs text-red-500 text-center mt-1.5",children:M})]}),e.jsxs(Y,{className:"justify-start pt-2",children:[e.jsx(b,{className:_,onClick:()=>o(!1),disabled:I,children:"Cancel"}),e.jsx(b,{style:{backgroundColor:i},className:l,onClick:H,disabled:I||!v,children:I?"Uploading...":"Confirm Upload"})]})]})]})]})})},je=({store:d,isPublishedView:o=!1})=>{var P;const{name:E,theme:V,heroImage:x,content:a,id:i,hero_video_url:y,hero_video_poster_url:J}=d,{updateStoreTextContent:m,updateStore:A,viewMode:c}=ee(),[C,F]=r.useState(0),[u,N]=r.useState([]),[D,k]=r.useState(!1),[U,h]=r.useState(!1),{scrollY:T}=he(),$=X(T,[0,500],[0,100]),p=X(T,[0,300],[1,.9]),v=(a==null?void 0:a.heroTitle)||`Welcome to ${E}`,S=(a==null?void 0:a.heroDescription)||"Discover amazing products and experiences that will transform your lifestyle. Fresh ideas, delivered daily.",M=(a==null?void 0:a.heroPrimaryCtaText)||"Explore Collection",f=(a==null?void 0:a.heroSecondaryCtaText)||"Watch Our Story",I=(a==null?void 0:a.heroBadgeText)||"Fresh Arrivals Daily",n=d==null?void 0:d.hero_video_url,j=(d==null?void 0:d.hero_video_poster_url)||((P=x==null?void 0:x.src)==null?void 0:P.large)||"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&q=80";r.useEffect(()=>{(async()=>{if(n)N([]);else{let l=[];j&&l.push(j);const _=E||"lifestyle";try{const t=await be(_,3);if(t&&t.photos&&t.photos.length>0){const w=t.photos.map(G=>G.src).filter(G=>G!==j);l=[...new Set([...l,...w])]}}catch(t){console.error("Failed to fetch Pexels photos for slideshow:",t)}if(l.length<2){const t=["https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=1200&q=80","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=1200&q=80","https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&q=80"].filter(w=>!l.includes(w));l.push(...t.slice(0,3-l.length))}N(l.slice(0,4)),F(0);const L=setInterval(()=>{F(t=>(t+1)%(l.slice(0,4).length||1))},6e3);return()=>clearInterval(L)}})()},[n,E,j]);const R=()=>{k(!0)},z=async s=>{if(i)try{await A(i,{hero_video_url:s,hero_video_poster_url:s?"":j})}catch(l){console.error("Failed to update store with new hero video URL:",l)}},q=()=>{const s=document.getElementById(`products-${i}`);s&&s.scrollIntoView({behavior:"smooth"})},H=()=>{const s=document.getElementById(`features-${i}`);s&&s.scrollIntoView({behavior:"smooth"})};return e.jsxs("section",{className:"relative min-h-[90vh] md:min-h-screen flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[n?e.jsxs("div",{className:"relative w-full h-full group",children:[e.jsx("video",{src:n,poster:j,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onPlay:()=>h(!0),onPause:()=>h(!1)},n),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-black/10"}),e.jsx(pe,{children:!U&&e.jsx(g.div,{initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border border-white/30 shadow-xl",children:e.jsx(Z,{className:"w-6 h-6 text-white ml-0.5"})})})})]}):u.length>0&&u.map((s,l)=>e.jsx(g.div,{className:"absolute inset-0",initial:{opacity:0,scale:1.05},animate:{opacity:l===C?1:0,scale:l===C?1:1.05},transition:{duration:1.2,ease:[.42,0,.58,1]},children:e.jsx("img",{src:s,alt:"Hero background",className:"w-full h-full object-cover"})},s+"-"+l)),!n&&u.length===0&&e.jsx("div",{className:"absolute inset-0 bg-slate-800 flex items-center justify-center",children:e.jsx("p",{className:"text-slate-500",children:"Loading background..."})}),!n&&u.length>0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-black/10 to-transparent"})]}),!o&&c==="edit"&&e.jsx(b,{variant:"outline",size:"icon",className:"absolute top-[76px] right-4 z-20 bg-black/50 hover:bg-black/70 text-white backdrop-blur-sm border-white/30 rounded-md shadow-md",onClick:R,title:"Replace Media",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(g.div,{className:"container mx-auto px-4 sm:px-6 relative z-10",style:{y:$,opacity:p},children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.7,ease:"easeOut"},className:"inline-flex items-center gap-2 px-4 py-1.5 bg-white/15 backdrop-blur-md rounded-full text-white text-xs sm:text-sm font-medium mb-6 border border-white/25",children:[e.jsx(te,{className:"w-3.5 h-3.5 text-yellow-300"}),e.jsx(B,{initialText:I,onSave:s=>m("heroBadgeText",s),isAdmin:!o&&c==="edit",as:"span",textClassName:"",inputClassName:"bg-transparent"})]}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.7,ease:"easeOut"},children:e.jsx(B,{initialText:v,onSave:s=>m("heroTitle",s),isAdmin:!o&&c==="edit",as:"h1",textClassName:"text-4xl sm:text-5xl md:text-6xl font-bold leading-tight tracking-tight text-white mb-5",inputClassName:"text-4xl sm:text-5xl md:text-6xl font-bold leading-tight tracking-tight text-white mb-5 bg-transparent",className:"text-4xl sm:text-5xl md:text-6xl font-bold leading-tight tracking-tight text-white mb-5"})}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.7,ease:"easeOut"},className:"mb-5",children:e.jsx(B,{initialText:S,onSave:s=>m("heroDescription",s),isAdmin:!o&&c==="edit",as:"p",textClassName:"text-lg sm:text-xl text-white/80 max-w-2xl mx-auto leading-relaxed",inputClassName:"text-lg sm:text-xl text-white/80 max-w-2xl mx-auto leading-relaxed bg-transparent",className:"text-lg sm:text-xl text-white/80 max-w-2xl mx-auto leading-relaxed",useTextarea:!0})}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.7,ease:"easeOut"},className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4",children:[e.jsx(g.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:e.jsxs(b,{onClick:q,size:"lg",className:"group relative overflow-hidden bg-white text-slate-900 hover:bg-slate-50 border-0 rounded-xl px-7 py-3 text-base font-semibold shadow-lg hover:shadow-xl transition-all duration-300 w-full sm:w-auto",children:[e.jsx(B,{initialText:M,onSave:s=>m("heroPrimaryCtaText",s),isAdmin:!o&&c==="edit",as:"span",textClassName:"",inputClassName:"bg-transparent"}),e.jsx(ge,{className:"w-4 h-4 ml-2 transition-transform group-hover:translate-x-1"})]})}),e.jsx(g.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:e.jsxs(b,{onClick:H,variant:"outline",size:"lg",className:"group relative overflow-hidden bg-white/10 backdrop-blur-md text-white hover:bg-white/20 border-white/30 hover:border-white/40 rounded-xl px-7 py-3 text-base font-semibold transition-all duration-300 w-full sm:w-auto",children:[e.jsx(B,{initialText:f,onSave:s=>m("heroSecondaryCtaText",s),isAdmin:!o&&c==="edit",as:"span",textClassName:"",inputClassName:"bg-transparent"}),e.jsx(Z,{className:"w-4 h-4 ml-2 group-hover:fill-white/20 transition-all"})]})})]})]})}),!o&&i&&e.jsx(ye,{open:D,onOpenChange:k,storeId:i,currentVideoUrl:n,onVideoReplaced:z})]})};export{je as default};
