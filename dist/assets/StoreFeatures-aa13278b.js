import{u as re,r as w,aw as ie,a as oe,b as $,j as e,m as n,S as M,I as x,ax as k,V as le,B as z,d as G,P as ne,R as ce,$ as J,e as de,aa as me,p as W,q as K,ab as Z,c as ue,Z as he,D as pe,t as xe,_ as be,H as ge,Y as ye,ay as ve,au as we}from"./index-ed27cf41.js";const je=({store:i,isPublishedView:T=!1})=>{var V,D,E,q,H,O,L,B;const{updateStore:P}=re(),[a,Y]=w.useState(0),[N,f]=w.useState(null),[R,j]=w.useState(null),[Q,I]=w.useState(!1),U=w.useRef(null),A={Shield:me,Truck:W,CreditCard:K,Headphones:Z,Star:ue,Zap:he,GlobeIcon:pe,AwardIcon:xe,UsersIcon:be,HeartIcon:ge,CheckCircle:J,Sparkles:M,ArrowRight:G,Play:ye,Pause:ve,Package:k},C=ie(U,{once:!0,margin:"-100px"}),{scrollYProgress:S}=oe({target:U,offset:["start end","end start"]}),_=$(S,[0,1],[100,-100]),X=$(S,[0,.2,.8,1],[0,1,1,0]),ee=$(S,[0,.2,.8,1],[.8,1,1,.8]),c=((V=i==null?void 0:i.theme)==null?void 0:V.primaryColor)||"#6366F1",b=i==null?void 0:i.id,d=!T,y={title:"An Exceptional Experience",subtitle:"We're committed to providing you with the best shopping experience through our premium services and customer-first approach.",items:[{emoji:"ðŸ’Ž",iconName:"Gem",title:"Refined Aesthetics",description:"Discover products with unparalleled design and elegance.",color:"#5E5CE6",stats:"Top Tier",image:"https://images.pexels.com/photos/1212487/pexels-photo-1212487.jpeg?auto=compress&cs=tinysrgb&w=600&q=80",videoUrl:""},{emoji:"ðŸšš",icon:W,title:"Fast Delivery",description:"Free shipping worldwide with express delivery options available.",color:"#3B82F6",stats:"2-3 Days",image:"https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?w=600&q=80"},{emoji:"ðŸ’³",icon:K,title:"Easy Returns",description:"30-day hassle-free returns with full refund guarantee.",color:"#8B5CF6",stats:"30 Days",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=600&q=80"},{emoji:"ðŸŽ§",icon:Z,title:"24/7 Support",description:"Round-the-clock customer support via chat, email, and phone.",color:"#F59E0B",stats:"Always On",image:"https://images.unsplash.com/photo-1553484771-371a605b060b?w=600&q=80"}],secondaryItems:[{iconName:"GlobeIcon",title:"Global Reach",description:"Serving customers in 50+ countries"},{iconName:"AwardIcon",title:"Premium Quality",description:"Certified products with quality guarantee"},{iconName:"UsersIcon",title:"Community Driven",description:"Join 100K+ satisfied customers"},{iconName:"HeartIcon",title:"Eco-Conscious",description:"Sustainable packaging and practices"}],statsItems:[{iconName:"UsersIcon",number:"50K+",label:"Happy Customers"},{iconName:"ZapIcon",number:"99.9%",label:"Uptime"},{iconName:"HeadphonesIcon",number:"24/7",label:"Support"},{iconName:"StarIcon",number:"4.9â˜…",label:"Rating"}]},u=(D=i==null?void 0:i.content)!=null&&D.storeFeatures?{...y,...i.content.storeFeatures,items:i.content.storeFeatures.items&&i.content.storeFeatures.items.length>0?i.content.storeFeatures.items:y.items,secondaryItems:i.content.storeFeatures.secondaryItems&&i.content.storeFeatures.secondaryItems.length>0?i.content.storeFeatures.secondaryItems:y.secondaryItems,statsItems:i.content.storeFeatures.statsItems&&i.content.storeFeatures.statsItems.length>0?i.content.storeFeatures.statsItems:y.statsItems}:y,r=u.items&&u.items.length>0?u.items:y.items;w.useEffect(()=>{const t=async()=>{const s=r[a];if(s&&!s.videoUrl){const o=s.title||s.description||"minimalist abstract animation";try{console.log(`[Sleek StoreFeatures] Fetching Pexels video for active feature "${o}"`);const l=await we(o,1);l&&l.videos&&l.videos.length>0?(f(l.videos[0].videoUrl),j(l.videos[0].imageUrl)):(console.warn(`No Pexels video found for query: "${o}". Clearing previous Pexels video.`),f(null),j(null))}catch(l){console.error(`Failed to fetch Pexels video for query "${o}":`,l),f(null),j(null)}}else s&&s.videoUrl&&(f(null),j(null))};r&&r.length>0&&a<r.length&&t()},[a,r]);const p=async(t,s)=>{if(!b||!d)return;let o=JSON.parse(JSON.stringify(u));const l=t.split("."),m=l[0],h=l.length>1?parseInt(l[1]):null;if(m.startsWith("item")&&h!==null){const g=m.replace("item","").toLowerCase();if(o.items&&o.items[h])o.items[h][g]=s;else{console.warn(`Attempted to save to non-existent item: ${t}`);return}}else if(m.startsWith("secondaryItem")&&h!==null){const g=m.replace("secondaryItem","").toLowerCase();if(o.secondaryItems&&o.secondaryItems[h])o.secondaryItems[h][g]=s;else{console.warn(`Attempted to save to non-existent secondaryItem: ${t}`);return}}else if(m.startsWith("statsItem")&&h!==null){const g=m.replace("statsItem","").toLowerCase();if(o.statsItems&&o.statsItems[h])o.statsItems[h][g]=s;else{console.warn(`Attempted to save to non-existent statsItem: ${t}`);return}}else if(t==="title"||t==="subtitle")o[t]=s;else{console.warn("handleSaveText called with unhandled field structure:",t);return}try{await P(b,{content:{...i.content,storeFeatures:o}})}catch(g){console.error(`Failed to update store features content for field "${t}":`,g)}},te=()=>I(!0),ae=async t=>{if(!b||!d||a===null||!r[a])return;const s=JSON.parse(JSON.stringify(u));if(s.items&&s.items[a])s.items[a].videoUrl=t,s.items[a].image="",f(null),j(null);else{console.error("Cannot update video URL: active feature item not found."),I(!1);return}try{await P(b,{content:{...i.content,storeFeatures:s}})}catch(o){console.error("Failed to update store with new feature video URL:",o)}I(!1)},F={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},v={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.25,.46,.45,.94]}}},se={hidden:{opacity:0,x:-50},visible:{opacity:1,x:0,transition:{duration:.8,ease:[.25,.46,.45,.94]}}};return e.jsxs("section",{ref:U,className:"relative py-20 gradient-bg overflow-hidden font-inter",id:`features-${b}`,children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(n.div,{className:"absolute top-10 left-10 w-1/2 h-1/2 bg-primary/10 blur-3xl rounded-full",style:{backgroundColor:`${c}1A`,y:_}}),e.jsx(n.div,{className:"absolute bottom-10 right-10 w-1/2 h-1/2 bg-secondary/10 blur-3xl rounded-full",style:{backgroundColor:`${((E=i==null?void 0:i.theme)==null?void 0:E.secondaryColor)||c}1A`,y:$(S,[0,1],[-100,100])}}),e.jsx(n.div,{className:"absolute top-1/3 left-1/3 w-2/5 h-2/5 bg-accent/10 blur-3xl rounded-full",animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0}})]}),e.jsxs(n.div,{className:"container mx-auto px-6 relative z-10",style:{opacity:X,scale:ee},children:[e.jsxs(n.div,{variants:F,initial:"hidden",animate:C?"visible":"hidden",className:"text-center mb-20",children:[e.jsxs(n.div,{variants:v,className:"inline-flex items-center gap-3 px-5 py-2.5 bg-white/10 dark:bg-black/10 backdrop-blur-md border border-white/20 dark:border-white/10 rounded-full text-sm font-medium mb-6 shadow-glass",style:{color:c,borderColor:`${c}40`},children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{className:"tracking-wide",children:"Why Choose Us"})]}),e.jsx(n.h2,{variants:v,className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-800 dark:text-gray-100 mb-6 tracking-tight",children:e.jsx(x,{initialText:u.title,onSave:t=>p("title",t),isAdmin:d,placeholder:"Section Title",as:"span",textClassName:"text-gray-800 dark:text-gray-100"})}),e.jsx(n.p,{variants:v,className:"text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto leading-relaxed",children:e.jsx(x,{initialText:u.subtitle,onSave:t=>p("subtitle",t),isAdmin:d,placeholder:"Section Subtitle",as:"span"})})]}),e.jsxs(n.div,{variants:F,initial:"hidden",animate:C?"visible":"hidden",className:"grid lg:grid-cols-2 gap-16 mb-20",children:[e.jsx(n.div,{variants:se,className:"space-y-6",children:r.map((t,s)=>{const o=t.icon||k,l=a===s;return e.jsx(n.div,{className:`p-6 rounded-2xl border transition-all duration-300 cursor-pointer backdrop-blur-md shadow-glass ${l?"bg-white/20 dark:bg-black/20 border-primary/50 dark:border-primary/40 ring-2 ring-primary/30":"bg-white/10 dark:bg-black/10 border-white/20 dark:border-white/10 hover:bg-white/15 dark:hover:bg-black/15 hover:border-white/30 dark:hover:border-white/20"}`,onClick:()=>Y(s),whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:s*.1},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center shadow-md text-3xl bg-white/10 dark:bg-black/10 border border-white/20 dark:border-white/10",style:{borderColor:t.color||`${c}50`},children:t.emoji||e.jsx(o,{className:"w-8 h-8",style:{color:t.color||c}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:[" ",e.jsx(x,{initialText:t.title,onSave:m=>p("itemTitle",m),isAdmin:d,placeholder:"Feature Title"})]}),t.stats&&e.jsx(le,{variant:"secondary",className:"text-xs font-medium tracking-wide px-2.5 py-1 rounded-md bg-white/5 dark:bg-black/5 border border-white/10 dark:border-white/5",style:{color:t.color||c,borderColor:`${t.color||c}30`},children:t.stats})]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed",children:[" ",e.jsx(x,{initialText:t.description,onSave:m=>p("itemDescription",m),isAdmin:d,placeholder:"Feature Description",useTextarea:!0})]}),l&&e.jsx(n.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-white/10 dark:border-white/5",children:e.jsxs(z,{variant:"ghost",size:"sm",className:"group text-sm tracking-wide",style:{color:t.color||c},children:["Learn More",e.jsx(G,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})},t.title+s)})}),r[a]&&e.jsxs(n.div,{variants:v,className:"relative aspect-square lg:aspect-[4/3] rounded-3xl overflow-hidden shadow-float-lg",children:[!T&&(((q=r[a])==null?void 0:q.videoUrl)||N)&&e.jsx(z,{variant:"outline",size:"icon",className:"absolute top-3 left-3 z-20 bg-background/70 hover:bg-background/90 text-foreground rounded-full p-2",onClick:te,title:"Replace Feature Video",children:e.jsx(ne,{className:"h-5 w-5"})}),(H=r[a])!=null&&H.videoUrl?e.jsx("video",{src:r[a].videoUrl,poster:r[a].image||R||"",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover rounded-2xl"},`feat-video-${a}`):N?e.jsx("video",{src:N,poster:R||((O=r[a])==null?void 0:O.image)||"",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover rounded-2xl"},`current-pexels-video-${a}`):(L=r[a])!=null&&L.image?e.jsx(n.img,{src:r[a].image,alt:r[a].title||"Sleek feature image",className:"absolute inset-0 w-full h-full object-cover rounded-2xl",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},transition:{duration:.8}},`feat-img-${a}`):e.jsx(n.img,{src:"https://images.pexels.com/photos/268351/pexels-photo-268351.jpeg?auto=compress&cs=tinysrgb&w=600",alt:"Default sleek feature background",className:"absolute inset-0 w-full h-full object-cover rounded-2xl",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},transition:{duration:.8}},`fallback-img-${a}`),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-black/5 rounded-2xl"}),e.jsx(n.div,{className:"absolute bottom-6 left-6 right-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs("div",{className:"bg-white/10 dark:bg-black/10 backdrop-blur-lg border border-white/10 dark:border-white/5 rounded-xl p-6 shadow-glass-light",children:[" ",e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl bg-white/5 dark:bg-black/5 border border-white/10 dark:border-white/5",style:{borderColor:r[a].color||`${c}50`},children:r[a].emoji||ce.createElement(r[a].icon||k,{className:"w-6 h-6",style:{color:r[a].color||c}})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-100 dark:text-white",children:[" ",r[a].title]}),r[a].stats&&e.jsxs("p",{className:"text-sm text-gray-300 dark:text-gray-400",children:[" ",r[a].stats]})]})]}),e.jsxs("p",{className:"text-gray-200 dark:text-gray-300 text-sm leading-relaxed",children:[" ",r[a].description]})]})},`overlay-${a}`),e.jsx(n.div,{className:"absolute -top-5 -right-5 w-28 h-28 bg-primary/10 backdrop-blur-xl rounded-full flex items-center justify-center border border-white/10 dark:border-white/5 z-10",style:{backgroundColor:`${c}1A`},animate:{y:[-8,8,-8],rotate:[0,10,0]},transition:{duration:6,repeat:1/0},children:e.jsx(J,{className:"w-12 h-12 text-green-400"})})]})]}),e.jsx(n.div,{variants:F,initial:"hidden",animate:C?"visible":"hidden",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:(u.secondaryItems||[]).map((t,s)=>{const o=A[t.iconName]||k;return e.jsxs(n.div,{variants:v,className:"text-center p-6 bg-white/5 dark:bg-black/5 backdrop-blur-md rounded-2xl border border-white/10 dark:border-white/5 hover:bg-white/10 dark:hover:bg-black/10 transition-all duration-300 shadow-glass-light",whileHover:{scale:1.05,y:-5},children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-xl flex items-center justify-center shadow-md bg-white/10 dark:bg-black/10 border border-white/20 dark:border-white/10",style:{borderColor:c+"50"},children:e.jsx(o,{className:"w-8 h-8",style:{color:c}})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:[" ",e.jsx(x,{initialText:t.title,onSave:l=>p(`secondaryItemTitle.${s}`,l),isAdmin:d,placeholder:"Feature Title"})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:[" ",e.jsx(x,{initialText:t.description,onSave:l=>p(`secondaryItemDescription.${s}`,l),isAdmin:d,placeholder:"Feature Description",useTextarea:!0})]})]},t.title+s)})}),e.jsx(n.div,{variants:F,initial:"hidden",animate:C?"visible":"hidden",className:"grid grid-cols-2 md:grid-cols-4 gap-8 p-8 bg-white/5 dark:bg-black/5 backdrop-blur-lg rounded-2xl border border-white/10 dark:border-white/5 shadow-glass",children:(u.statsItems||[]).map((t,s)=>{const o=A[t.iconName]||k;return e.jsxs(n.div,{variants:v,className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-lg flex items-center justify-center bg-white/5 dark:bg-black/5 border border-white/10 dark:border-white/5",style:{borderColor:`${c}40`},children:e.jsx(o,{className:"w-6 h-6",style:{color:c}})}),e.jsxs("div",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:[" ",e.jsx(x,{initialText:t.number,onSave:l=>p("statsItemNumber",l),isAdmin:d,placeholder:"Stat Number"})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[" ",e.jsx(x,{initialText:t.label,onSave:l=>p("statsItemLabel",l),isAdmin:d,placeholder:"Stat Label"})]})]},t.label+s)})})]}),!T&&b&&e.jsx(de,{open:Q,onOpenChange:I,storeId:b,currentVideoUrl:((B=r[a])==null?void 0:B.videoUrl)||N,onVideoReplaced:ae})]})};export{je as default};
