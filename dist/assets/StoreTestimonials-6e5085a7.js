import{u as S,j as t,m as f,I as w,w as N,c as T}from"./index-eca7a0fb.js";import{U as D}from"./user-circle-aeb56252.js";const A=({testimonial:e,className:g,isAdmin:i,onSave:o,index:c})=>{const h=(e==null?void 0:e.userName)||(e==null?void 0:e.user_name)||(e==null?void 0:e.author)||"Anonymous",u=(e==null?void 0:e.rating)||0,s=(e==null?void 0:e.comment)||(e==null?void 0:e.text)||"No comment provided.",n=e==null?void 0:e.photoUrl,d=(e==null?void 0:e.createdAt)||(e==null?void 0:e.created_at);let m="Date not available";if(d)try{m=new Date(d).toLocaleDateString()}catch(r){console.error("Error parsing testimonial date:",r)}const x=(r,a)=>{o&&o(c,r,a)};return t.jsxs(f.div,{className:N("bg-card text-card-foreground p-6 rounded-md shadow-lg flex flex-col",g),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsxs("div",{className:"flex items-center mb-4",children:[n?t.jsx("img",{src:n,alt:h,className:"h-10 w-10 rounded-full mr-3 object-cover"}):t.jsx(D,{className:"h-10 w-10 text-muted-foreground mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-foreground",children:t.jsx(w,{initialText:h,onSave:r=>x("userName",r),isAdmin:i,placeholder:"User Name"})}),t.jsx("div",{className:"flex items-center",children:[...Array(5)].map((r,a)=>t.jsx(T,{className:N("h-4 w-4",a<u?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600")},a))})]})]}),t.jsxs("blockquote",{className:"text-sm text-muted-foreground italic leading-relaxed",children:['"',t.jsx(w,{initialText:s,onSave:r=>x("comment",r),isAdmin:i,placeholder:"Testimonial comment"}),'"']}),t.jsx("p",{className:"text-xs text-muted-foreground/70 mt-4 text-right",children:m})]})},M=[{id:"sample1",userName:"Alex P.",rating:5,comment:"Absolutely love this product! The quality is outstanding and it exceeded my expectations. Highly recommend to everyone.",createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),photoUrl:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXZhdGFyfGVufDB8fDB8fHww&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},{id:"sample2",userName:"Jamie L.",rating:4,comment:"Great value for the price. It works as described and looks fantastic. Shipping was also quite fast.",createdAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),photoUrl:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXZhdGFyfGVufDB8fDB8fHww&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},{id:"sample3",userName:"Casey B.",rating:5,comment:"Customer service was excellent when I had a question. The product itself is top-notch. Will definitely shop here again!",createdAt:new Date(Date.now()-10*24*60*60*1e3).toISOString(),photoUrl:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YXZhdGFyfGVufDB8fDB8fHww&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"}],U=({store:e,isPublishedView:g=!1})=>{const{updateStore:i}=S(),{content:o,id:c,reviews:h}=e,u=!g,s=h,n=!s||s.length===0?M:s;if(!n||n.length===0)return null;const d=async(a,l,v=null)=>{if(c)try{if(a==="testimonialsSectionTitle")await i(c,{content:{...o,testimonialsSectionTitle:l}});else if(v!==null&&(a==="userName"||a==="comment"))if(s&&s.length>0){const y=s.map((p,j)=>{if(j===v){const b=a==="userName"?p.hasOwnProperty("userName")?"userName":"user_name":p.hasOwnProperty("comment")?"comment":"text";return{...p,[b]:l}}return p});await i(c,{reviews:y})}else console.warn("Attempted to edit sample testimonial. This action is not saved.")}catch(y){console.error(`Failed to update store ${a}:`,y)}},m=(o==null?void 0:o.testimonialsSectionTitle)||"What Our Customers Say",x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15}}},r={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}};return t.jsx("section",{id:`testimonials-${c||"store-testimonials"}`,className:"py-16 md:py-24 bg-background",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsx(f.h2,{className:"text-3xl font-bold tracking-tight text-center mb-12 md:mb-16 text-foreground",initial:{opacity:0,y:-30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:{duration:.5,ease:"easeOut"},children:t.jsx(w,{initialText:m,onSave:a=>d("testimonialsSectionTitle",a),isAdmin:u,placeholder:"Testimonials Section Title"})}),t.jsx(f.div,{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",variants:x,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},children:n.map((a,l)=>t.jsx(f.div,{variants:r,children:t.jsx(A,{testimonial:a,isAdmin:u,onSave:d,index:l})},a.id||a.userName+String(a.createdAt)+l))})]})})};export{U as default};
