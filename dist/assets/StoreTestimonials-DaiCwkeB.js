import{P as j,y as S,j as t,F as g,z as T,X as y,C as b}from"./index-DQzOWQZE.js";const D=j("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),v=({testimonial:e,className:p,isAdmin:l,onSave:c,index:n})=>{const x=(e==null?void 0:e.userName)||(e==null?void 0:e.user_name)||(e==null?void 0:e.author)||"Anonymous",h=(e==null?void 0:e.rating)||0,s=(e==null?void 0:e.comment)||(e==null?void 0:e.text)||"No comment provided.",d=e==null?void 0:e.photoUrl,i=(e==null?void 0:e.createdAt)||(e==null?void 0:e.created_at);let m="Date not available";if(i)try{m=new Date(i).toLocaleDateString()}catch(r){console.error("Error parsing testimonial date:",r)}const a=(r,o)=>{c&&c(n,r,o)};return t.jsxs(T.div,{className:y("bg-card text-card-foreground p-6 rounded-md shadow-lg flex flex-col",p),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsxs("div",{className:"flex items-center mb-4",children:[d?t.jsx("img",{src:d,alt:x,className:"h-10 w-10 rounded-full mr-3 object-cover"}):t.jsx(D,{className:"h-10 w-10 text-muted-foreground mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-foreground",children:t.jsx(g,{initialText:x,onSave:r=>a("userName",r),isAdmin:l,placeholder:"User Name"})}),t.jsx("div",{className:"flex items-center",children:[...Array(5)].map((r,o)=>t.jsx(b,{className:y("h-4 w-4",o<h?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600")},o))})]})]}),t.jsxs("blockquote",{className:"text-sm text-muted-foreground italic leading-relaxed",children:['"',t.jsx(g,{initialText:s,onSave:r=>a("comment",r),isAdmin:l,placeholder:"Testimonial comment"}),'"']}),t.jsx("p",{className:"text-xs text-muted-foreground/70 mt-4 text-right",children:m})]})},A=[{id:"sample1",userName:"Alex P.",rating:5,comment:"Absolutely love this product! The quality is outstanding and it exceeded my expectations. Highly recommend to everyone.",createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),photoUrl:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YXZhdGFyfGVufDB8fDB8fHww&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},{id:"sample2",userName:"Jamie L.",rating:4,comment:"Great value for the price. It works as described and looks fantastic. Shipping was also quite fast.",createdAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),photoUrl:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXZhdGFyfGVufDB8fDB8fHww&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},{id:"sample3",userName:"Casey B.",rating:5,comment:"Customer service was excellent when I had a question. The product itself is top-notch. Will definitely shop here again!",createdAt:new Date(Date.now()-10*24*60*60*1e3).toISOString(),photoUrl:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YXZhdGFyfGVufDB8fDB8fHww&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"}],k=({store:e,isPublishedView:p=!1})=>{const{updateStore:l}=S(),{content:c,id:n,reviews:x}=e,h=!p,s=x,d=!s||s.length===0?A:s;if(!d||d.length===0)return null;const i=async(a,r,o=null)=>{if(n)try{if(a==="testimonialsSectionTitle")await l(n,{content:{...c,testimonialsSectionTitle:r}});else if(o!==null&&(a==="userName"||a==="comment"))if(s&&s.length>0){const f=s.map((u,w)=>{if(w===o){const N=a==="userName"?u.hasOwnProperty("userName")?"userName":"user_name":u.hasOwnProperty("comment")?"comment":"text";return{...u,[N]:r}}return u});await l(n,{reviews:f})}else console.warn("Attempted to edit sample testimonial. This action is not saved.")}catch(f){console.error(`Failed to update store ${a}:`,f)}},m=(c==null?void 0:c.testimonialsSectionTitle)||"What Our Customers Say";return t.jsx("section",{id:`testimonials-${n||"store-testimonials"}`,className:"py-16 md:py-24 bg-background",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight text-center mb-12 md:mb-16 text-foreground",children:t.jsx(g,{initialText:m,onSave:a=>i("testimonialsSectionTitle",a),isAdmin:h,placeholder:"Testimonials Section Title"})}),t.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:d.map((a,r)=>t.jsx(v,{testimonial:a,isAdmin:h,onSave:i,index:r},a.id||a.userName+String(a.createdAt)+r))})]})})};export{k as default};
