import{y as N,Y as v,r as w,j as e,z as T,Z as k,F as b,I as C,B as E}from"./index-DQzOWQZE.js";const $=({store:o,isPublishedView:g=!1})=>{const{updateStore:f}=N(),{theme:i,content:s,name:l,id:d}=o,{toast:c}=v(),[m,x]=w.useState(""),[n,u]=w.useState(!1),h=!g,y=(s==null?void 0:s.newsletterHeading)||`Stay Updated with ${l}`,j=(s==null?void 0:s.newsletterText)||"Subscribe to our newsletter for the latest products, offers, and news.",p=async(t,r)=>{if(d)try{let a={...s};t==="newsletterHeading"?a.newsletterHeading=r:t==="newsletterText"&&(a.newsletterText=r),await f(d,{content:a})}catch(a){console.error(`Failed to update store ${t}:`,a)}},S=async t=>{if(t.preventDefault(),!m.trim()){c({title:"Email required",description:"Please enter your email address.",variant:"destructive"});return}u(!0),await new Promise(r=>setTimeout(r,1e3)),c({title:"Subscribed!",description:`Thanks for subscribing to ${l}'s newsletter.`}),x(""),u(!1)};return e.jsx("section",{className:"py-16 bg-background",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(T.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-2xl mx-auto text-center bg-muted/60 dark:bg-slate-800/40 p-8 md:p-12 rounded-xl shadow-lg",style:{borderColor:`${i.primaryColor}30`,borderWidth:"1px"},children:[e.jsx(k,{className:"w-12 h-12 mx-auto mb-4",style:{color:i.primaryColor}}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-3 tracking-tight text-foreground",children:e.jsx(b,{initialText:y,onSave:t=>p("newsletterHeading",t),isAdmin:h,placeholder:"Newsletter Heading"})}),e.jsx("p",{className:"text-muted-foreground mb-6",children:e.jsx(b,{initialText:j,onSave:t=>p("newsletterText",t),isAdmin:h,placeholder:"Newsletter Text"})}),e.jsxs("form",{onSubmit:S,className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",children:[e.jsx(C,{type:"email",placeholder:"Enter your email address",className:"flex-grow h-12 text-base",value:m,onChange:t=>x(t.target.value),disabled:n,required:!0}),e.jsxs(E,{type:"submit",className:"h-12 text-base",style:{backgroundColor:i.primaryColor,color:"white"},disabled:n,children:[n?e.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Subscribe"]})]})]})})})},H=o=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...o,children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});export{$ as default};
