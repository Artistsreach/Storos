import{u as le,r,af as re,a as oe,b as C,j as e,m as l,w as ne,L as R,c as ie,I as B,B as n,n as P,i as U,K as ce,A as S,av as de,X as L,ah as $,d as me,D as xe}from"./index-eca7a0fb.js";const fe=({store:d,isPublishedView:he=!1})=>{var D;const{name:i,theme:ue,logo_url_light:x,logo_url_dark:h,id:o,settings:be}=d,{cart:_,removeFromCart:V,updateQuantity:I,updateStoreTextContent:E}=le(),[Y,f]=r.useState(!1),[K,g]=r.useState(!1),[N,Q]=r.useState(!1),[w,u]=r.useState(!1),[m,z]=r.useState(""),[T,H]=r.useState([]),[W,X]=r.useState(!1),y=r.useRef(null),j=re(),b=_.filter(s=>s.storeId===o),F=b.reduce((s,t)=>s+t.quantity,0),G=b.reduce((s,t)=>s+t.price*t.quantity,0),{scrollY:k}=oe(),J=C(k,[0,50],[1,.95]),Z=C(k,[0,50],[.8,.95]),ee=C(k,[0,50],[0,10]);r.useEffect(()=>{const s=()=>X(window.scrollY>30);return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),r.useEffect(()=>{w&&y.current&&y.current.focus()},[w]),r.useEffect(()=>{if(m.trim()&&d.products){const s=d.products.filter(t=>{var a,c;return((a=t.name)==null?void 0:a.toLowerCase().includes(m.toLowerCase()))||((c=t.description)==null?void 0:c.toLowerCase().includes(m.toLowerCase()))});H(s)}else H([])},[m,d.products]),r.useEffect(()=>{Q(!0),document.documentElement.classList.add("dark")},[]);const p=`/store/${o}`,v=((D=d==null?void 0:d.content)==null?void 0:D.navLinkLabels)||["Home","Products","About","Contact"],A=[{href:p,label:v[0],identifier:"content.navLinkLabels.0"},{href:`#products-${o}`,label:v[1],identifier:"content.navLinkLabels.1"},{href:`#features-${o}`,label:v[2],identifier:"content.navLinkLabels.2"},{href:`#contact-${o}`,label:v[3],identifier:"content.navLinkLabels.3"}],M=(s,t)=>{if(s.preventDefault(),f(!1),t.startsWith("/store/"))j(t);else{const a=t.substring(1),c=document.getElementById(a);c?c.scrollIntoView({behavior:"smooth"}):j(p)}},se=()=>{g(!1),j("/checkout",{state:{cart:b,storeName:i,storeId:o}})},te=s=>{s.preventDefault();const t=document.getElementById(`products-${o}`);t&&t.scrollIntoView({behavior:"smooth"}),u(!1)},ae=s=>{u(!1),z(""),j(`${p}/product/${s}`)},O=N?x:h,q=x||h;return e.jsxs(e.Fragment,{children:[e.jsx(l.header,{style:{opacity:J,"--header-bg-opacity":Z,backdropFilter:`blur(${ee}px)`},className:ne("fixed top-0 z-50 w-full transition-all duration-300 border-b",W?"bg-slate-900/[var(--header-bg-opacity)] dark:bg-slate-950/[var(--header-bg-opacity)] shadow-md border-slate-700/60 py-3":"bg-slate-900/80 dark:bg-slate-950/80 border-slate-700/40 py-4"),children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 flex items-center justify-between",children:[e.jsxs(R,{to:p,className:"flex items-center gap-2.5 group",children:[O?e.jsx(l.img,{src:O,alt:`${i} logo`,className:"h-10 w-10 object-contain rounded-md border-2 border-slate-700 group-hover:border-blue-500 transition-colors",whileHover:{scale:1.05,rotate:-5}}):q?e.jsx(l.img,{src:q,alt:`${i} logo (fallback)`,className:"h-10 w-10 object-contain rounded-md border-2 border-slate-700 group-hover:border-blue-500 transition-colors",whileHover:{scale:1.05,rotate:-5}}):e.jsx("div",{className:"h-10 w-10 bg-slate-700 rounded-md flex items-center justify-center text-blue-400",children:e.jsx(ie,{className:"h-6 w-6"})}),e.jsx(B,{initialText:i,onSave:s=>E(`stores.${o}.name`,s),identifier:"name",as:"span",className:"font-bold text-lg tracking-tighter text-slate-100 group-hover:text-blue-400 transition-colors duration-300 font-mono uppercase",children:i})]}),e.jsx("nav",{className:"hidden lg:flex items-center gap-x-6",children:A.map((s,t)=>e.jsx(l.div,{initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{delay:t*.08+.2},className:"relative group",children:e.jsxs(B,{initialText:s.label,onSave:a=>E(s.identifier,a),identifier:s.identifier,as:"a",href:s.href,onClick:a=>M(a,s.href),className:"text-xs font-semibold text-slate-300 hover:text-blue-400 transition-colors duration-300 relative font-mono uppercase tracking-wider",children:[s.label,e.jsx("span",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0.5 bg-blue-500 transition-all duration-300 group-hover:w-full"})]})},s.identifier))}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(l.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(n,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-blue-400 hover:bg-slate-800/70 rounded-md border border-transparent hover:border-blue-600/50",onClick:()=>u(!0),children:e.jsx(P,{className:"h-5 w-5"})})}),e.jsx(l.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(n,{className:"relative flex items-center gap-1.5 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white border-0 rounded-md px-3 sm:px-4 py-2 shadow-md hover:shadow-lg transition-all duration-300 font-mono text-xs sm:text-sm uppercase tracking-wide",onClick:()=>g(!0),children:[e.jsx(U,{className:"h-4 w-4 sm:h-5 sm:w-5"}),F>0&&e.jsx(l.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1.5 -right-1.5 h-4 w-4 sm:h-5 sm:w-5 bg-yellow-400 text-slate-900 text-[10px] sm:text-xs rounded-full flex items-center justify-center font-bold",children:F}),e.jsx("span",{className:"hidden sm:inline",children:"Cart"})]})}),e.jsx(l.div,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"lg:hidden",children:e.jsx(n,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-blue-400 hover:bg-slate-800/70 rounded-md border border-transparent hover:border-blue-600/50",onClick:()=>f(!0),children:e.jsx(ce,{className:"h-6 w-6"})})})]})]})}),e.jsx(S,{children:w&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-slate-950/70 backdrop-blur-md p-4 flex flex-col items-center justify-center",onClick:()=>u(!1),children:e.jsxs(l.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-slate-900 rounded-lg shadow-2xl w-full max-w-2xl border border-slate-700",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-6 h-6 text-blue-500"}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white font-mono uppercase",children:"Search Arsenal"})]}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>u(!1),className:"rounded-md text-slate-400 hover:text-blue-400",children:e.jsx(L,{className:"h-5 w-5"})})]}),e.jsx("form",{onSubmit:te,className:"p-4 sm:p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-slate-500 h-5 w-5"}),e.jsx("input",{ref:y,type:"text",placeholder:"Enter gear name or keyword...",className:"w-full pl-10 sm:pl-12 pr-4 py-3 text-sm sm:text-base border-2 border-slate-700 rounded-md focus:outline-none focus:border-blue-500 bg-slate-800 transition-colors text-white placeholder-slate-500 font-mono",value:m,onChange:s=>z(s.target.value)})]})}),m.trim()!==""&&e.jsx($,{className:"max-h-[50vh] px-4 sm:px-6 pb-4 sm:pb-6",children:T.length>0?e.jsx("div",{className:"space-y-3",children:T.map(s=>{var t,a,c;return e.jsxs(l.div,{className:"flex items-center gap-3 p-3 bg-slate-800/50 hover:bg-slate-700/70 rounded-md cursor-pointer transition-colors border border-slate-700 hover:border-blue-600/50",onClick:()=>ae(s.id),whileHover:{scale:1.02},children:[e.jsx("img",{src:((a=(t=s.image)==null?void 0:t.src)==null?void 0:a.tiny)||`https://via.placeholder.com/40x40.png?text=${s.name.charAt(0)}`,alt:s.name,className:"w-10 h-10 object-cover rounded-sm border border-slate-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-white font-mono line-clamp-1",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-400 font-mono line-clamp-1",children:["$",(c=s.price)==null?void 0:c.toFixed(2)]})]}),e.jsx(me,{className:"h-4 w-4 text-slate-500"})]},s.id)})}):e.jsxs("p",{className:"text-center text-slate-400 py-8 font-mono text-sm",children:['No gear found matching "',m,'".']})})]})})}),e.jsx(S,{children:Y&&e.jsxs(l.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:350,damping:35},className:"fixed inset-0 z-[90] bg-slate-900 lg:hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 sm:p-6 flex justify-between items-center border-b border-slate-700",children:[e.jsxs(R,{to:p,className:"flex items-center gap-2",onClick:()=>f(!1),children:[(N?x:h)?e.jsx("img",{src:N?x:h,alt:`${i} logo`,className:"h-8 w-8 object-contain rounded-sm border border-slate-600"}):x||h?e.jsx("img",{src:x||h,alt:`${i} logo`,className:"h-8 w-8 object-contain rounded-sm border border-slate-600"}):null,e.jsx("span",{className:"font-bold text-md text-white font-mono uppercase",children:i})]}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>f(!1),className:"rounded-md text-slate-400 hover:text-blue-400",children:e.jsx(L,{className:"h-6 w-6"})})]}),e.jsx($,{className:"flex-1 p-4 sm:p-6",children:e.jsx("nav",{className:"flex flex-col gap-y-3",children:A.map((s,t)=>e.jsx(l.a,{href:s.href,onClick:a=>M(a,s.href),className:"block py-3 px-3 text-md font-medium text-slate-200 hover:text-blue-400 hover:bg-slate-800/70 rounded-md transition-colors font-mono uppercase tracking-wider",initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:t*.05+.1},children:s.label},s.label))})})]})}),e.jsx(S,{children:K&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[95] bg-black/70 backdrop-blur-sm",onClick:()=>g(!1)}),e.jsxs(l.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:350,damping:35},className:"fixed z-[100] inset-y-0 right-0 h-full w-full max-w-sm bg-slate-900 shadow-2xl flex flex-col border-l border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-slate-700",children:[e.jsx("h2",{className:"text-lg font-bold text-white font-mono uppercase",children:"Mission Loadout"}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>g(!1),className:"rounded-md text-slate-400 hover:text-blue-400",children:e.jsx(L,{className:"h-5 w-5"})})]}),b.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(U,{className:"h-12 w-12 text-slate-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1 font-mono",children:"Cart Empty"}),e.jsx("p",{className:"text-slate-400 text-sm font-mono",children:"No gear selected."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"flex-1 p-4 sm:p-6",children:e.jsx("div",{className:"space-y-4",children:b.map(s=>{var t,a;return e.jsxs(l.div,{className:"flex items-start gap-3 pb-4 border-b border-slate-700/50 last:border-0 last:pb-0",initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[e.jsx("img",{src:((a=(t=s.image)==null?void 0:t.src)==null?void 0:a.tiny)||`https://via.placeholder.com/64x64.png?text=${s.name.charAt(0)}`,alt:s.name,className:"w-16 h-16 object-cover rounded-md border border-slate-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-white font-mono line-clamp-1",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-400 font-mono",children:["$",s.price.toFixed(2)," x ",s.quantity]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx(n,{variant:"outline",size:"icon",className:"h-6 w-6 rounded-sm border-slate-600 text-slate-300 hover:text-blue-400 hover:border-blue-500",onClick:()=>I(s.id,o,s.quantity-1),children:e.jsx("span",{className:"text-sm",children:"-"})}),e.jsx("span",{className:"text-xs w-5 text-center font-medium text-white font-mono",children:s.quantity}),e.jsx(n,{variant:"outline",size:"icon",className:"h-6 w-6 rounded-sm border-slate-600 text-slate-300 hover:text-blue-400 hover:border-blue-500",onClick:()=>I(s.id,o,s.quantity+1),children:e.jsx("span",{className:"text-sm",children:"+"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-white font-mono",children:["$",(s.price*s.quantity).toFixed(2)]}),e.jsx(n,{variant:"ghost",size:"icon",className:"h-7 w-7 mt-1 text-slate-500 hover:text-blue-500",onClick:()=>V(s.id,o),children:e.jsx(xe,{className:"h-3.5 w-3.5"})})]})]},s.id)})})}),e.jsxs("div",{className:"border-t border-slate-700 p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm font-mono",children:[e.jsx("span",{className:"text-slate-400",children:"Subtotal"}),e.jsxs("span",{className:"text-white font-semibold",children:["$",G.toFixed(2)]})]}),e.jsx(n,{className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white border-0 rounded-md py-3 text-base font-medium font-mono uppercase tracking-wider",onClick:se,children:"Proceed to Debrief (Checkout)"})]})]})]})]})})]})};export{fe as default};
