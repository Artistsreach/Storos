import{ai as ae,aj as w,bw as oe,ak as ie,al as P,am as e,ap as l,ar as M,at as x,bx as N,by as re,au as B,aw as J,ax as ne,an as le,bz as W,ay as ce,be as de,bf as G,bg as K,bh as Z,bA as me,bB as ue,bC as pe,bD as he,b7 as xe,aq as be,bE as ge,bF as ve,bv as ye}from"./index-4b0969f0.js";const je=({store:r,isPublishedView:k=!1})=>{var V,E,q,O,H,L,z;const{updateStore:$}=ae(),[s,Q]=w.useState(0),[I,b]=w.useState(null),[R,g]=w.useState(null),[Y,C]=w.useState(!1),T=w.useRef(null),A={Shield:de,Truck:G,CreditCard:K,Headphones:Z,Star:M,Zap:me,GlobeIcon:ue,AwardIcon:pe,UsersIcon:he,HeartIcon:xe,CheckCircle:W,Sparkles:be,ArrowRight:J,Play:ge,Pause:ve,Package:N},S=oe(T,{once:!0,margin:"-100px"}),{scrollYProgress:U}=ie({target:T,offset:["start end","end start"]}),D=P(U,[0,1],[100,-100]),X=P(U,[0,.2,.8,1],[0,1,1,0]),_=P(U,[0,.2,.8,1],[.9,1,1,.9]),p=((V=r==null?void 0:r.theme)==null?void 0:V.primaryColor)||"#6366F1",v=r==null?void 0:r.id,c=!k,f={title:"An Exceptional Experience",subtitle:"We're committed to providing you with the best shopping experience through our premium services and customer-first approach.",items:[{emoji:"âš¡",iconName:"Zap",title:"Cutting-Edge Tech",description:"Explore the latest innovations and high-performance gadgets.",color:"#3B82F6",stats:"New Arrivals",image:"https://images.pexels.com/photos/1029757/pexels-photo-1029757.jpeg?auto=compress&cs=tinysrgb&w=600&q=80",videoUrl:""},{emoji:"ðŸšš",icon:G,title:"Fast Delivery",description:"Free shipping worldwide with express delivery options available.",color:"#2563EB",stats:"2-3 Days",image:"https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?w=600&q=80"},{emoji:"ðŸ’³",icon:K,title:"Easy Returns",description:"30-day hassle-free returns with full refund guarantee.",color:"#1D4ED8",stats:"30 Days",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=600&q=80"},{emoji:"ðŸŽ§",icon:Z,title:"24/7 Support",description:"Round-the-clock customer support via chat, email, and phone.",color:"#60A5FA",stats:"Always On",image:"https://images.unsplash.com/photo-1553484771-371a605b060b?w=600&q=80"}],secondaryItems:[{iconName:"GlobeIcon",title:"Global Reach",description:"Serving customers in 50+ countries"},{iconName:"AwardIcon",title:"Premium Quality",description:"Certified products with quality guarantee"},{iconName:"UsersIcon",title:"Community Driven",description:"Join 100K+ satisfied customers"},{iconName:"HeartIcon",title:"Eco-Conscious",description:"Sustainable packaging and practices"}],statsItems:[{iconName:"UsersIcon",number:"50K+",label:"Happy Customers"},{iconName:"ZapIcon",number:"99.9%",label:"Uptime"},{iconName:"HeadphonesIcon",number:"24/7",label:"Support"},{iconName:"StarIcon",number:"4.9â˜…",label:"Rating"}]},m=(E=r==null?void 0:r.content)!=null&&E.storeFeatures?{...f,...r.content.storeFeatures,items:r.content.storeFeatures.items&&r.content.storeFeatures.items.length>0?r.content.storeFeatures.items:f.items,secondaryItems:r.content.storeFeatures.secondaryItems&&r.content.storeFeatures.secondaryItems.length>0?r.content.storeFeatures.secondaryItems:f.secondaryItems,statsItems:r.content.storeFeatures.statsItems&&r.content.storeFeatures.statsItems.length>0?r.content.storeFeatures.statsItems:f.statsItems}:f,a=m.items&&m.items.length>0?m.items:f.items;w.useEffect(()=>{if(a&&a.length>0&&s>=0&&s<a.length){const t=a[s];(async()=>{if(t&&!t.videoUrl){const o=t.title||t.description||"abstract geometric animation";try{console.log(`[Sharp StoreFeatures] Fetching Pexels video for active feature "${o}"`);const n=await ye(o);n&&n.video?(b(n.video.videoUrl),g(n.video.imageUrl)):(console.warn(`No Pexels video found for query: "${o}". Clearing previous Pexels video.`),b(null),g(null))}catch(n){console.error(`Failed to fetch Pexels video for query "${o}":`,n),b(null),g(null)}}else t&&t.videoUrl,b(null),g(null)})()}else b(null),g(null)},[s,a]);const h=async(t,i)=>{if(!v||!c)return;let o=JSON.parse(JSON.stringify(m));const n=t.split("."),d=n[0],u=n.length>1?parseInt(n[1]):null;if(d.startsWith("item")&&u!==null){const y=d.replace("item","").toLowerCase();if(o.items&&o.items[u])o.items[u][y]=i;else{console.warn(`Attempted to save to non-existent item: ${t}`);return}}else if(d.startsWith("secondaryItem")&&u!==null){const y=d.replace("secondaryItem","").toLowerCase();if(o.secondaryItems&&o.secondaryItems[u])o.secondaryItems[u][y]=i;else{console.warn(`Attempted to save to non-existent secondaryItem: ${t}`);return}}else if(d.startsWith("statsItem")&&u!==null){const y=d.replace("statsItem","").toLowerCase();if(o.statsItems&&o.statsItems[u])o.statsItems[u][y]=i;else{console.warn(`Attempted to save to non-existent statsItem: ${t}`);return}}else if(t==="title"||t==="subtitle")o[t]=i;else{console.warn("handleSaveText called with unhandled field structure:",t);return}try{await $(v,{content:{...r.content,storeFeatures:o}})}catch(y){console.error(`Failed to update store features content for field "${t}":`,y)}},ee=()=>C(!0),te=async t=>{if(!v||!c||s===null||!a[s])return;const i=JSON.parse(JSON.stringify(m));if(i.items&&i.items[s])i.items[s].videoUrl=t,i.items[s].image="",b(null),g(null);else{console.error("Cannot update video URL: active feature item not found."),C(!1);return}try{await $(v,{content:{...r.content,storeFeatures:i}})}catch(o){console.error("Failed to update store with new feature video URL:",o)}C(!1)},F={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},j={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.25,.46,.45,.94]}}},se={hidden:{opacity:0,x:-50},visible:{opacity:1,x:0,transition:{duration:.8,ease:[.25,.46,.45,.94]}}};return e.jsxs("section",{ref:T,className:"relative py-20 text-white overflow-hidden gradient-bg",id:`features-${v}`,children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(l.div,{className:"absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-blue-700/10 blur-3xl rounded-full opacity-60",style:{y:D}}),e.jsx(l.div,{className:"absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-blue-600/10 blur-3xl rounded-full opacity-50",style:{y:D}}),e.jsx(l.div,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-3/4 h-3/4 bg-slate-700/10 blur-3xl rounded-full opacity-40",animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0}})]}),e.jsxs(l.div,{className:"container mx-auto px-6 relative z-10",style:{opacity:X,scale:_},children:[e.jsxs(l.div,{variants:F,initial:"hidden",animate:S?"visible":"hidden",className:"text-center mb-20",children:[e.jsxs(l.div,{variants:j,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-900/40 text-blue-300 border border-blue-700/60 rounded-md text-xs font-mono uppercase tracking-widest mb-6",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:"Why Choose Us"})]}),e.jsx(l.h2,{variants:j,className:"text-4xl md:text-5xl lg:text-6xl font-extrabold text-white mb-6 tracking-tighter font-mono uppercase",children:e.jsx(x,{initialText:m.title,onSave:t=>h("title",t),isAdmin:c,placeholder:"Section Title",as:"span",textClassName:"bg-gradient-to-r from-slate-100 via-blue-400 to-sky-400 bg-clip-text text-transparent",style:{backgroundSize:"200% auto"}})}),e.jsx(l.p,{variants:j,className:"text-lg text-slate-300 max-w-3xl mx-auto leading-relaxed",children:e.jsx(x,{initialText:m.subtitle,onSave:t=>h("subtitle",t),isAdmin:c,placeholder:"Section Subtitle",as:"span"})})]}),e.jsxs(l.div,{variants:F,initial:"hidden",animate:S?"visible":"hidden",className:"grid lg:grid-cols-2 gap-16 mb-20",children:[e.jsx(l.div,{variants:se,className:"space-y-6",children:a.map((t,i)=>{const o=t.icon||N,n=s===i;return e.jsx(l.div,{className:`p-6 rounded-md border transition-all duration-300 cursor-pointer ${n?"bg-slate-700/90 border-2 border-blue-500 shadow-xl ring-2 ring-blue-500/30":"bg-slate-800/70 border border-slate-700/50 shadow-lg hover:border-blue-500/80"}`,onClick:()=>Q(i),whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:i*.1},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-md flex items-center justify-center shadow-md text-3xl",style:{backgroundColor:t.color||`${p}DD`},children:t.emoji||e.jsx(o,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-xl font-bold text-blue-400 font-mono uppercase",children:[" ",e.jsx(x,{initialText:t.title,onSave:d=>h("itemTitle",d),isAdmin:c,placeholder:"Feature Title"})]}),t.stats&&e.jsx(re,{variant:"secondary",className:"text-xs font-medium font-mono uppercase",style:{backgroundColor:`${t.color||p}40`,color:t.color||p,borderColor:`${t.color||p}60`},children:t.stats})]}),e.jsx("p",{className:"text-slate-400 leading-relaxed",children:e.jsx(x,{initialText:t.description,onSave:d=>h("itemDescription",d),isAdmin:c,placeholder:"Feature Description",useTextarea:!0})}),n&&e.jsx(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-slate-700",children:e.jsxs(B,{variant:"outline",size:"sm",className:"group font-mono uppercase tracking-wider border-2 border-blue-600/70 text-blue-400 hover:bg-blue-600/20 hover:border-blue-500",children:["Learn More",e.jsx(J,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})},t.title+i)})}),a[s]&&e.jsxs(l.div,{variants:j,className:"relative aspect-square lg:aspect-[4/3] rounded-lg overflow-hidden shadow-2xl border-2 border-slate-700/50",children:[!k&&(((q=a[s])==null?void 0:q.videoUrl)||I)&&e.jsx(B,{variant:"outline",size:"icon",className:"absolute top-3 left-3 z-20 bg-slate-800/70 hover:bg-slate-700/90 text-white rounded-full p-2",onClick:ee,title:"Replace Feature Video",children:e.jsx(ne,{className:"h-5 w-5"})}),(O=a[s])!=null&&O.videoUrl?e.jsx("video",{src:a[s].videoUrl,poster:a[s].image||R||"",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover rounded-md"},`feat-video-${s}`):I?e.jsx("video",{src:I,poster:R||((H=a[s])==null?void 0:H.image)||"",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover rounded-md"},`current-pexels-video-${s}`):(L=a[s])!=null&&L.image?e.jsx(l.img,{src:a[s].image,alt:a[s].title||"Sharp feature image",className:"absolute inset-0 w-full h-full object-cover rounded-md",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},transition:{duration:.8}},`feat-img-${s}`):e.jsx(l.img,{src:"https://images.pexels.com/photos/2110951/pexels-photo-2110951.jpeg?auto=compress&cs=tinysrgb&w=600",alt:"Default sharp feature background",className:"absolute inset-0 w-full h-full object-cover rounded-md",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},transition:{duration:.8}},`fallback-img-${s}`),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent rounded-md"}),e.jsx(l.div,{className:"absolute bottom-4 left-4 right-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-md border border-slate-600/80 rounded-md p-4 shadow-lg",children:[" ",e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-md flex items-center justify-center text-xl",style:{backgroundColor:a[s].color||`${p}CC`},children:a[s].emoji||le.createElement(a[s].icon||N,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-bold text-blue-400 font-mono uppercase",children:[" ",a[s].title]}),a[s].stats&&e.jsxs("p",{className:"text-xs text-slate-300 font-mono uppercase",children:[" ",a[s].stats]})]})]}),e.jsxs("p",{className:"text-xs text-slate-400 leading-normal",children:[" ",a[s].description]})]})},`overlay-${s}`),e.jsx(l.div,{className:"absolute -top-2 -right-2 w-16 h-16 bg-blue-600/40 backdrop-blur-sm rounded-md flex items-center justify-center border border-blue-500/60 z-10",animate:{y:[-8,8,-8],rotate:[0,10,0]},transition:{duration:6,repeat:1/0},children:e.jsx(W,{className:"w-12 h-12 text-green-400"})})]})]}),e.jsx(l.div,{variants:F,initial:"hidden",animate:S?"visible":"hidden",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:(m.secondaryItems||[]).map((t,i)=>{const o=A[t.iconName]||N;return e.jsxs(l.div,{variants:j,className:"text-center p-6 bg-slate-800/70 backdrop-blur-md rounded-md border border-slate-700/50 hover:bg-slate-700/80 hover:border-blue-500/70 transition-all duration-300 shadow-lg",whileHover:{scale:1.05,y:-5},children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-md flex items-center justify-center shadow-md",style:{backgroundColor:p},children:e.jsx(o,{className:"w-8 h-8 text-white"})}),e.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-2 font-mono uppercase",children:[" ",e.jsx(x,{initialText:t.title,onSave:n=>h(`secondaryItemTitle.${i}`,n),isAdmin:c,placeholder:"Feature Title"})]}),e.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:e.jsx(x,{initialText:t.description,onSave:n=>h(`secondaryItemDescription.${i}`,n),isAdmin:c,placeholder:"Feature Description",useTextarea:!0})})]},t.title+i)})}),e.jsx(l.div,{variants:F,initial:"hidden",animate:S?"visible":"hidden",className:"grid grid-cols-2 md:grid-cols-4 gap-6 p-6 bg-slate-800/70 backdrop-blur-md rounded-md border border-slate-700/50 shadow-xl",children:(m.statsItems||[]).map((t,i)=>{const o=A[t.iconName]||N;return e.jsxs(l.div,{variants:j,className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2 rounded-md flex items-center justify-center",style:{backgroundColor:`${p}50`},children:e.jsx(o,{className:"w-6 h-6",style:{color:p}})}),e.jsxs("div",{className:"text-2xl font-bold text-white mb-1 font-mono",children:[" ",e.jsx(x,{initialText:t.number,onSave:n=>h("statsItemNumber",n),isAdmin:c,placeholder:"Stat Number"})]}),e.jsxs("div",{className:"text-xs text-slate-400 font-mono uppercase tracking-widest",children:[" ",e.jsx(x,{initialText:t.label,onSave:n=>h("statsItemLabel",n),isAdmin:c,placeholder:"Stat Label"})]})]},t.label+i)})})]}),!k&&v&&e.jsx(ce,{open:Y,onOpenChange:C,storeId:v,currentVideoUrl:((z=a[s])==null?void 0:z.videoUrl)||I,onVideoReplaced:te})]})};export{je as default};
