import{P as C,y as F,r as l,j as e,z as m,F as S,Q as E,B as u,U as G,A as $}from"./index-DQzOWQZE.js";import{P as A}from"./ProductCard-CvccPia4.js";const I=C("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),q=C("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),B=({store:r,isPublishedView:x=!1})=>{var v,w;const{products:a,theme:p,id:c,content:i}=r,{updateStore:T}=F(),g=!x,[o,h]=l.useState("grid"),[n,y]=l.useState(""),[f,j]=l.useState(a||[]),[N,L]=l.useState(!0),b=async(t,s)=>{if(c)try{await T(c,{content:{...i||{},[t]:s}})}catch(d){console.error(`Failed to update product grid text for ${t}:`,d)}};if(l.useEffect(()=>{const t=setTimeout(()=>{L(!1)},800);return()=>clearTimeout(t)},[]),l.useEffect(()=>{if(a)if(n.trim()==="")j(a);else{const t=a.filter(s=>{var d,k;return((d=s.name)==null?void 0:d.toLowerCase().includes(n.toLowerCase()))||((k=s.description)==null?void 0:k.toLowerCase().includes(n.toLowerCase()))});j(t)}},[n,a]),!a||a.length===0)return e.jsxs("section",{id:`products-${c}`,className:"py-12 container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 font-poppins",children:"Our Products"}),e.jsx("p",{className:"text-muted-foreground",children:"No products available at the moment. Check back soon!"})]});const P=()=>e.jsxs("div",{className:"bg-card rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"aspect-square bg-muted animate-pulse"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-1/2"}),e.jsx("div",{className:"h-6 bg-muted rounded animate-pulse w-1/3 mt-2"})]})]});return e.jsx("section",{id:`products-${c}`,className:"py-12 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[(r.logo_url||((v=r.theme)==null?void 0:v.logo))&&e.jsx("img",{src:r.logo_url||((w=r.theme)==null?void 0:w.logo),alt:`${r.name||"Store"} Logo`,className:"h-[83px] md:h-[104px] mx-auto mb-4 object-contain"}),e.jsx(S,{initialText:(i==null?void 0:i.productGridTitle)||"Featured Products",onSave:t=>b("productGridTitle",t),isAdmin:g,placeholder:"Section Title",as:"h2",textClassName:"text-3xl md:text-5xl font-bold mb-3 tracking-tight font-poppins bg-gradient-to-r from-foreground to-muted-foreground bg-clip-text text-transparent",className:"w-full"}),e.jsx(S,{initialText:(i==null?void 0:i.productGridSubtitle)||"Explore our curated selection of high-quality items, handpicked for you.",onSave:t=>b("productGridSubtitle",t),isAdmin:g,placeholder:"Section Subtitle",as:"p",textClassName:"text-muted-foreground max-w-xl mx-auto text-md md:text-lg",className:"w-full mt-2",useTextarea:!0})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-primary/20 bg-background",value:n,onChange:t=>y(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",size:"icon",className:o==="grid"?"bg-primary/10":"",onClick:()=>h("grid"),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(u,{variant:"outline",size:"icon",className:o==="list"?"bg-primary/10":"",onClick:()=>h("list"),children:e.jsx(q,{className:"h-4 w-4"})}),e.jsxs(u,{variant:"outline",className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Filter"})]})]})]}),e.jsx($,{mode:"wait",children:N?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:o==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8":"space-y-4",children:Array(8).fill(0).map((t,s)=>e.jsx(P,{},`skeleton-${s}`))},"loading"):e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{staggerChildren:.05},className:o==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8":"space-y-4",children:f.map((t,s)=>e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:s*.05},className:o==="list"?"w-full":"",children:e.jsx(A,{product:t,theme:p,index:s,storeId:c,isPublishedView:x,displayMode:o})},t.id||`product-${s}`))},"products")}),f.length===0&&!N&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground",children:"No products found matching your search."}),e.jsx(u,{onClick:()=>y(""),className:"mt-4",style:{backgroundColor:p.primaryColor},children:"Clear Search"})]})]})})};export{B as default};
