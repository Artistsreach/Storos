import{ai as P,aj as l,am as e,ap as m,at as C,aA as E,au as u,aB as F,aC as G,ao as $,aD as A}from"./index-15348b98.js";import{F as I}from"./filter-1b5cfb2e.js";const z=({store:s,isPublishedView:x=!1})=>{var v,w;const{products:i,theme:p,id:c,content:r}=s,{updateStore:k}=P(),g=!x,[o,h]=l.useState("grid"),[d,f]=l.useState(""),[j,y]=l.useState(i||[]),[N,T]=l.useState(!0),b=async(t,a)=>{if(c)try{await k(c,{content:{...r||{},[t]:a}})}catch(n){console.error(`Failed to update product grid text for ${t}:`,n)}};if(l.useEffect(()=>{const t=setTimeout(()=>{T(!1)},800);return()=>clearTimeout(t)},[]),l.useEffect(()=>{if(i)if(d.trim()==="")y(i);else{const t=i.filter(a=>{var n,S;return((n=a.name)==null?void 0:n.toLowerCase().includes(d.toLowerCase()))||((S=a.description)==null?void 0:S.toLowerCase().includes(d.toLowerCase()))});y(t)}},[d,i]),!i||i.length===0)return e.jsxs("section",{id:`products-${c}`,className:"py-12 container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 font-poppins",children:"Our Products"}),e.jsx("p",{className:"text-muted-foreground",children:"No products available at the moment. Check back soon!"})]});const L=()=>e.jsxs("div",{className:"bg-card rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"aspect-square bg-muted animate-pulse"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-1/2"}),e.jsx("div",{className:"h-6 bg-muted rounded animate-pulse w-1/3 mt-2"})]})]});return e.jsx("section",{id:`products-${c}`,className:"py-12 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[(s.logo_url||((v=s.theme)==null?void 0:v.logo))&&e.jsx("img",{src:s.logo_url||((w=s.theme)==null?void 0:w.logo),alt:`${s.name||"Store"} Logo`,className:"h-[83px] md:h-[104px] mx-auto mb-4 object-contain"}),e.jsx(C,{initialText:(r==null?void 0:r.productGridTitle)||"Featured Products",onSave:t=>b("productGridTitle",t),isAdmin:g,placeholder:"Section Title",as:"h2",textClassName:"text-3xl md:text-5xl font-bold mb-3 tracking-tight font-poppins bg-gradient-to-r from-foreground to-muted-foreground bg-clip-text text-transparent",className:"w-full"}),e.jsx(C,{initialText:(r==null?void 0:r.productGridSubtitle)||"Explore our curated selection of high-quality items, handpicked for you.",onSave:t=>b("productGridSubtitle",t),isAdmin:g,placeholder:"Section Subtitle",as:"div",textClassName:"text-muted-foreground max-w-xl mx-auto text-md md:text-lg",className:"w-full mt-2",useTextarea:!0})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-primary/20 bg-background",value:d,onChange:t=>f(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",size:"icon",className:o==="grid"?"bg-primary/10":"",onClick:()=>h("grid"),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(u,{variant:"outline",size:"icon",className:o==="list"?"bg-primary/10":"",onClick:()=>h("list"),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsxs(u,{variant:"outline",className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Filter"})]})]})]}),e.jsx($,{mode:"wait",children:N?e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:o==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8":"space-y-4",children:Array(8).fill(0).map((t,a)=>e.jsx(L,{},`skeleton-${a}`))},"loading"):e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{staggerChildren:.05},className:o==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8":"space-y-4",children:j.map((t,a)=>e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.05},className:o==="list"?"w-full":"",children:e.jsx(A,{product:t,theme:p,index:a,storeName:s.urlSlug,storeId:c,isPublishedView:x,displayMode:o})},t.id||`product-${a}`))},"products")}),j.length===0&&!N&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground",children:"No products found matching your search."}),e.jsx(u,{onClick:()=>f(""),className:"mt-4",style:{backgroundColor:p.primaryColor},children:"Clear Search"})]})]})})};export{z as default};
