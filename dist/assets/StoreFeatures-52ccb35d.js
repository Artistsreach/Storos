import{u as ae,r as j,ax as re,a as ie,b as P,j as e,m as n,S as B,I as p,ay as N,a0 as oe,B as M,d as J,P as le,R as ne,a4 as W,e as ce,ae as de,q as G,t as K,af as Z,c as me,Z as ue,O as xe,v as he,a3 as pe,H as be,a2 as ge,az as ye,av as ve}from"./index-440cc513.js";const we=({store:l,isPublishedView:F=!1})=>{var D,E,O,q,H,L,z;const{updateStore:T}=ae(),[s,Q]=j.useState(0),[I,b]=j.useState(null),[R,g]=j.useState(null),[Y,k]=j.useState(!1),$=j.useRef(null),A={Shield:de,Truck:G,CreditCard:K,Headphones:Z,Star:me,Zap:ue,GlobeIcon:xe,AwardIcon:he,UsersIcon:pe,HeartIcon:be,CheckCircle:W,Sparkles:B,ArrowRight:J,Play:ge,Pause:ye,Package:N},C=re($,{once:!0,margin:"-100px"}),{scrollYProgress:U}=ie({target:$,offset:["start end","end start"]}),V=P(U,[0,1],[100,-100]),X=P(U,[0,.2,.8,1],[0,1,1,0]),_=P(U,[0,.2,.8,1],[.9,1,1,.9]),c=((D=l==null?void 0:l.theme)==null?void 0:D.primaryColor)||"#6366F1",y=l==null?void 0:l.id,d=!F,f={title:"An Exceptional Experience",subtitle:"We're committed to providing you with the best shopping experience through our premium services and customer-first approach.",items:[{emoji:"ðŸŒ¿",iconName:"HeartIcon",title:"Naturally Sourced",description:"Discover products made with the finest natural ingredients.",color:"#22C55E",stats:"100% Organic",image:"https://images.pexels.com/photos/3225517/pexels-photo-3225517.jpeg?auto=compress&cs=tinysrgb&w=600&q=80",videoUrl:""},{emoji:"ðŸšš",icon:G,title:"Fast Delivery",description:"Free shipping worldwide with express delivery options available.",color:"#3B82F6",stats:"2-3 Days",image:"https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?w=600&q=80"},{emoji:"ðŸ’³",icon:K,title:"Easy Returns",description:"30-day hassle-free returns with full refund guarantee.",color:"#8B5CF6",stats:"30 Days",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=600&q=80"},{emoji:"ðŸŽ§",icon:Z,title:"24/7 Support",description:"Round-the-clock customer support via chat, email, and phone.",color:"#F59E0B",stats:"Always On",image:"https://images.unsplash.com/photo-1553484771-371a605b060b?w=600&q=80"}],secondaryItems:[{iconName:"GlobeIcon",title:"Global Reach",description:"Serving customers in 50+ countries"},{iconName:"AwardIcon",title:"Premium Quality",description:"Certified products with quality guarantee"},{iconName:"UsersIcon",title:"Community Driven",description:"Join 100K+ satisfied customers"},{iconName:"HeartIcon",title:"Eco-Conscious",description:"Sustainable packaging and practices"}],statsItems:[{iconName:"UsersIcon",number:"50K+",label:"Happy Customers"},{iconName:"ZapIcon",number:"99.9%",label:"Uptime"},{iconName:"HeadphonesIcon",number:"24/7",label:"Support"},{iconName:"StarIcon",number:"4.9â˜…",label:"Rating"}]},u=(E=l==null?void 0:l.content)!=null&&E.storeFeatures?{...f,...l.content.storeFeatures,items:l.content.storeFeatures.items&&l.content.storeFeatures.items.length>0?l.content.storeFeatures.items:f.items,secondaryItems:l.content.storeFeatures.secondaryItems&&l.content.storeFeatures.secondaryItems.length>0?l.content.storeFeatures.secondaryItems:f.secondaryItems,statsItems:l.content.storeFeatures.statsItems&&l.content.storeFeatures.statsItems.length>0?l.content.storeFeatures.statsItems:f.statsItems}:f,a=u.items&&u.items.length>0?u.items:f.items;j.useEffect(()=>{if(a&&a.length>0&&s>=0&&s<a.length){const t=a[s];(async()=>{if(t&&!t.videoUrl){const r=t.title||t.description||"abstract nature loop";try{console.log(`[Fresh StoreFeatures] Fetching Pexels video for active feature "${r}"`);const o=await ve(r);o&&o.video?(b(o.video.videoUrl),g(o.video.imageUrl)):(console.warn(`No Pexels video found for query: "${r}". Clearing previous Pexels video.`),b(null),g(null))}catch(o){console.error(`Failed to fetch Pexels video for query "${r}":`,o),b(null),g(null)}}else t&&t.videoUrl,b(null),g(null)})()}else b(null),g(null)},[s,a]);const h=async(t,i)=>{if(!y||!d)return;let r=JSON.parse(JSON.stringify(u));const o=t.split("."),m=o[0],x=o.length>1?parseInt(o[1]):null;if(m.startsWith("item")&&x!==null){const v=m.replace("item","").toLowerCase();if(r.items&&r.items[x])r.items[x][v]=i;else{console.warn(`Attempted to save to non-existent item: ${t}`);return}}else if(m.startsWith("secondaryItem")&&x!==null){const v=m.replace("secondaryItem","").toLowerCase();if(r.secondaryItems&&r.secondaryItems[x])r.secondaryItems[x][v]=i;else{console.warn(`Attempted to save to non-existent secondaryItem: ${t}`);return}}else if(m.startsWith("statsItem")&&x!==null){const v=m.replace("statsItem","").toLowerCase();if(r.statsItems&&r.statsItems[x])r.statsItems[x][v]=i;else{console.warn(`Attempted to save to non-existent statsItem: ${t}`);return}}else if(t==="title"||t==="subtitle")r[t]=i;else{console.warn("handleSaveText called with unhandled field structure:",t);return}try{await T(y,{content:{...l.content,storeFeatures:r}})}catch(v){console.error(`Failed to update store features content for field "${t}":`,v)}},ee=()=>k(!0),te=async t=>{if(!y||!d||s===null||!a[s])return;const i=JSON.parse(JSON.stringify(u));if(i.items&&i.items[s])i.items[s].videoUrl=t,i.items[s].image="",b(null),g(null);else{console.error("Cannot update video URL: active feature item not found."),k(!1);return}try{await T(y,{content:{...l.content,storeFeatures:i}})}catch(r){console.error("Failed to update store with new feature video URL:",r)}k(!1)},S={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},w={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.25,.46,.45,.94]}}},se={hidden:{opacity:0,x:-50},visible:{opacity:1,x:0,transition:{duration:.8,ease:[.25,.46,.45,.94]}}};return e.jsxs("section",{ref:$,className:"relative py-20 gradient-bg overflow-hidden",id:`features-${y}`,children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(n.div,{className:"absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-primary/5 dark:bg-primary/10 blur-3xl rounded-full opacity-50",style:{backgroundColor:`${c}0D`,y:V}}),e.jsx(n.div,{className:"absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-secondary/5 dark:bg-secondary/10 blur-3xl rounded-full opacity-50",style:{y:V,backgroundColor:`${c}0A`}}),e.jsx(n.div,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-3/4 h-3/4 bg-accent/5 dark:bg-accent/10 blur-3xl rounded-full opacity-30",animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0}})]}),e.jsxs(n.div,{className:"container mx-auto px-6 relative z-10",style:{opacity:X,scale:_},children:[e.jsxs(n.div,{variants:S,initial:"hidden",animate:C?"visible":"hidden",className:"text-center mb-20",children:[e.jsxs(n.div,{variants:w,className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium mb-6 border",style:{backgroundColor:`${c}1A`,color:c,borderColor:`${c}40`},children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"Why Choose Us"})]}),e.jsx(n.h2,{variants:w,className:"text-4xl md:text-5xl lg:text-6xl font-bold text-slate-800 dark:text-white mb-6 tracking-tight",children:e.jsx(p,{initialText:u.title,onSave:t=>h("title",t),isAdmin:d,placeholder:"Section Title",as:"span",textClassName:"text-slate-800 dark:text-white"})}),e.jsx(n.p,{variants:w,className:"text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto leading-relaxed",children:e.jsx(p,{initialText:u.subtitle,onSave:t=>h("subtitle",t),isAdmin:d,placeholder:"Section Subtitle",as:"span"})})]}),e.jsxs(n.div,{variants:S,initial:"hidden",animate:C?"visible":"hidden",className:"grid lg:grid-cols-2 gap-16 mb-20",children:[e.jsx(n.div,{variants:se,className:"space-y-6",children:a.map((t,i)=>{const r=t.icon||N,o=s===i;return e.jsx(n.div,{className:`p-6 rounded-2xl border transition-all duration-300 cursor-pointer ${o?"bg-white dark:bg-slate-700 border-primary dark:border-primary shadow-xl ring-2 ring-primary":"bg-white dark:bg-slate-700/50 border-slate-200 dark:border-slate-600 shadow-lg hover:shadow-md"}`,onClick:()=>Q(i),whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:i*.1},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center shadow-md text-3xl",style:{backgroundColor:t.color||`${c}30`},children:t.emoji||e.jsx(r,{className:"w-8 h-8",style:{color:o?"white":c}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e.jsx(p,{initialText:t.title,onSave:m=>h("itemTitle",m),isAdmin:d,placeholder:"Feature Title"})}),t.stats&&e.jsx(oe,{variant:"secondary",className:"text-xs font-medium",style:{backgroundColor:`${t.color||c}20`,color:t.color||c},children:t.stats})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed",children:e.jsx(p,{initialText:t.description,onSave:m=>h("itemDescription",m),isAdmin:d,placeholder:"Feature Description",useTextarea:!0})}),o&&e.jsx(n.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-600",children:e.jsxs(M,{variant:"link",size:"sm",className:"group",style:{borderColor:t.color||c,color:t.color||c},children:["Learn More",e.jsx(J,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})},t.title+i)})}),a[s]&&e.jsxs(n.div,{variants:w,className:"relative aspect-square lg:aspect-[4/3] rounded-3xl overflow-hidden shadow-float-lg",children:[!F&&(((O=a[s])==null?void 0:O.videoUrl)||I)&&e.jsx(M,{variant:"outline",size:"icon",className:"absolute top-3 left-3 z-20 bg-background/70 hover:bg-background/90 text-foreground rounded-full p-2",onClick:ee,title:"Replace Feature Video",children:e.jsx(le,{className:"h-5 w-5"})}),(q=a[s])!=null&&q.videoUrl?e.jsx("video",{src:a[s].videoUrl,poster:a[s].image||R||"",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover rounded-2xl"},`feat-video-${s}`):I?e.jsx("video",{src:I,poster:R||((H=a[s])==null?void 0:H.image)||"",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover rounded-2xl"},`current-pexels-video-${s}`):(L=a[s])!=null&&L.image?e.jsx(n.img,{src:a[s].image,alt:a[s].title||"Fresh feature image",className:"absolute inset-0 w-full h-full object-cover rounded-2xl",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},transition:{duration:.8}},`feat-img-${s}`):e.jsx(n.img,{src:"https://images.pexels.com/photos/1002703/pexels-photo-1002703.jpeg?auto=compress&cs=tinysrgb&w=600",alt:"Default fresh feature background",className:"absolute inset-0 w-full h-full object-cover rounded-2xl",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},transition:{duration:.8}},`fallback-img-${s}`),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-black/10 rounded-2xl"}),e.jsx(n.div,{className:"absolute bottom-6 left-6 right-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs("div",{className:"bg-black/40 dark:bg-black/60 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[" ",e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:a[s].color||`${c}40`},children:a[s].emoji||ne.createElement(a[s].icon||N,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:a[s].title}),a[s].stats&&e.jsxs("p",{className:"text-sm text-gray-100",children:[" ",a[s].stats]})]})]}),e.jsxs("p",{className:"text-gray-100 text-sm leading-relaxed",children:[" ",a[s].description]})]})},`overlay-${s}`),e.jsx(n.div,{className:"absolute -top-3 -right-3 w-20 h-20 bg-white/80 dark:bg-slate-700/80 backdrop-blur-sm rounded-xl flex items-center justify-center border border-white/30 dark:border-slate-600 shadow-lg z-10",animate:{y:[-8,8,-8],rotate:[0,10,0]},transition:{duration:6,repeat:1/0},children:e.jsx(W,{className:"w-12 h-12 text-green-400"})})]})]}),e.jsx(n.div,{variants:S,initial:"hidden",animate:C?"visible":"hidden",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:(u.secondaryItems||[]).map((t,i)=>{const r=A[t.iconName]||N;return e.jsxs(n.div,{variants:w,className:"text-center p-6 bg-white dark:bg-slate-700/50 rounded-2xl border border-slate-200 dark:border-slate-600 shadow-md hover:shadow-lg transition-all duration-300",whileHover:{scale:1.05,y:-5},children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-xl flex items-center justify-center shadow-md",style:{backgroundColor:c},children:e.jsx(r,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:e.jsx(p,{initialText:t.title,onSave:o=>h(`secondaryItemTitle.${i}`,o),isAdmin:d,placeholder:"Feature Title"})}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:e.jsx(p,{initialText:t.description,onSave:o=>h(`secondaryItemDescription.${i}`,o),isAdmin:d,placeholder:"Feature Description",useTextarea:!0})})]},t.title+i)})}),e.jsx(n.div,{variants:S,initial:"hidden",animate:C?"visible":"hidden",className:"grid grid-cols-2 md:grid-cols-4 gap-8 p-8 bg-white dark:bg-slate-700/50 rounded-2xl border border-slate-200 dark:border-slate-600 shadow-md",children:(u.statsItems||[]).map((t,i)=>{const r=A[t.iconName]||N;return e.jsxs(n.div,{variants:w,className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-lg flex items-center justify-center",style:{backgroundColor:`${c}20`},children:e.jsx(r,{className:"w-6 h-6",style:{color:c}})}),e.jsx("div",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-1",children:e.jsx(p,{initialText:t.number,onSave:o=>h("statsItemNumber",o),isAdmin:d,placeholder:"Stat Number"})}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.jsx(p,{initialText:t.label,onSave:o=>h("statsItemLabel",o),isAdmin:d,placeholder:"Stat Label"})})]},t.label+i)})})]}),!F&&y&&e.jsx(ce,{open:Y,onOpenChange:k,storeId:y,currentVideoUrl:((z=a[s])==null?void 0:z.videoUrl)||I,onVideoReplaced:te})]})};export{we as default};
