import{u as re,r as h,x as ye,j as e,ai as de,aj as ce,ak as me,al as ue,am as Ne,ah as we,C as xe,ar as $,y as _,aI as ke,aJ as Q,B as x,D as ae,aH as Ce,aK as pe,S as ie,aL as se,as as Se,aF as he,aM as Te,aN as Ae,aO as Ee,m as F,L as ee,c as ge,i as $e,k as ve,A as fe,E as _e,H as Fe,$ as Ge,z as Ie,a0 as Ve,I as D,n as be,G as Le,o as Me}from"./index-eca7a0fb.js";import{L as Oe}from"./list-6efefddd.js";const De=N=>new Promise((m,i)=>{const j=new FileReader;j.readAsDataURL(N),j.onload=()=>m(j.result),j.onerror=g=>i(g)}),je=({isOpen:N,onClose:m,product:i,onSave:j,storeId:g,theme:d})=>{const{updateStore:w,currentStore:r}=re(),[a,v]=h.useState(null),[y,f]=h.useState(!1),[z,A]=h.useState(!1),[V,P]=h.useState(null),[I,B]=h.useState(!1),{toast:u}=ye();h.useEffect(()=>{if(i){const t=i.item&&i.item.itemId;v(t?{...i,id:i.item.itemId,name:i.item.title,description:i.item.title,price:i.item.sku.def.promotionPrice*1.5,cost:i.item.sku.def.promotionPrice,shipping:0,images:[i.item.image],variants:[],inventory_count:0}:{...i,name:i.name||i.product_title,description:i.description||i.product_description||"",price:i.price||i.target_sale_price*1.5,cost:i.cost||i.target_sale_price,shipping:i.shipping||i.shipping_cost||0,images:i.images||[i.product_main_image_url],variants:i.variants||[],inventory_count:i.inventory_count||0})}},[i]);const k=(t,s)=>{v(n=>({...n,[t]:s}))},U=async t=>{if(t)try{const s=await De(t);v(n=>{const o=Array.isArray(n.images)?n.images:[];return{...n,images:[...o,s]}})}catch(s){console.error("Error converting file to base64:",s),u({title:"Image Upload Error",description:"Could not process image.",variant:"destructive"})}},Y=t=>{v(s=>({...s,images:s.images.filter((n,o)=>o!==t)}))},G=async()=>{if(!a||!a.name){u({title:"Missing Product Info",description:"Product name is required to generate visuals.",variant:"destructive"});return}const t=a.images&&a.images.length>0?a.images[0]:null;if(!t){u({title:"Missing Base Image",description:"At least one image is required to generate more visuals.",variant:"destructive"});return}A(!0);try{const{base64ImageData:s,mimeType:n}=await Te(t),o=a.name;let b=[];try{const c=await Ae(s,n,o);c&&c.length>0&&b.push(...c.slice(0,2)),u({title:"Angles Generated",description:`${Math.min(2,(c==null?void 0:c.length)||0)} angle images generated.`,variant:"success"})}catch(c){console.error("Error generating angles:",c),u({title:"Angle Generation Failed",description:c.message,variant:"destructive"})}const E=[`Place this product, "${o}", in a realistic home setting where it might be used or displayed. Focus on a natural context.`,`Show this product, "${o}", in an outdoor lifestyle setting, highlighting its use case or appeal.`];for(const c of E)try{const T=await Ee(s,n,c);T&&T.editedImageData&&b.push(`data:${T.newMimeType};base64,${T.editedImageData}`)}catch(T){console.error(`Error generating context image with prompt "${c}":`,T),u({title:"Context Image Failed",description:`Failed for: ${c.substring(0,30)}...`,variant:"destructive"})}u({title:"Context Images Attempted",description:`Attempted to generate ${E.length} context images.`,variant:"success"}),b.length>0?v(c=>{const T=Array.isArray(c.images)?c.images:[],X=new Set(T),J=b.filter(Z=>!X.has(Z));return J.length>0?{...c,images:[...T,...J]}:(u({title:"Visuals Generated",description:"Generated images were already present.",variant:"default"}),c)}):u({title:"No New Visuals",description:"Could not generate additional visuals.",variant:"default"})}catch(s){console.error("Error in handleGenerateMoreVisuals:",s),u({title:"Visual Generation Error",description:s.message,variant:"destructive"})}finally{A(!1)}},L=(t,s)=>{v(n=>{const o=[...n.variants||[]];return o[t]={...o[t],name:s},{...n,variants:o}})},C=(t,s,n)=>{v(o=>{const b=[...o.variants||[]],E={...b[t]};return E.values=[...E.values||[]],E.values[s]=n,b[t]=E,{...o,variants:b}})},R=t=>{v(s=>{const n=[...s.variants||[]],o={...n[t]};return o.values=[...o.values||[],""],n[t]=o,{...s,variants:n}})},M=(t,s)=>{v(n=>{const o=[...n.variants||[]],b={...o[t]};return b.values=(b.values||[]).filter((E,c)=>c!==s),o[t]=b,{...n,variants:o}})},l=()=>{v(t=>({...t,variants:[...t.variants||[],{name:"",values:[""]}]}))},S=t=>{v(s=>({...s,variants:(s.variants||[]).filter((n,o)=>o!==t)}))},H=async()=>{if(f(!0),!a.name||a.name.trim()===""||a.price===void 0||String(a.price).trim()===""){u({title:"Missing Information",description:"Please ensure the product has a name and a valid price.",variant:"destructive"}),f(!1);return}try{const t={...a,product_title:a.name,product_description:a.description,sale_price:a.price,target_sale_price:a.cost,shipping_cost:a.shipping,product_main_image_url:a.images[0]};if(r&&r.products){const s=r.products.map(n=>n.id===t.id?t:n);await w(g,{products:s})}j(t,i.id),m()}catch{u({title:"Save Error",description:"Could not save product changes.",variant:"destructive"})}finally{f(!1)}},q=t=>{P(t),B(!0)};if(!N||!a)return null;const K=a.price-a.cost-a.shipping,W=a.price>0?K/a.price*100:0;return e.jsxs(e.Fragment,{children:[e.jsx(de,{open:N,onOpenChange:t=>!t&&m(),children:e.jsxs(ce,{className:"max-w-2xl",children:[e.jsxs(me,{children:[e.jsxs(ue,{children:["Edit Product: ",i.item?i.item.title:i.product_title]}),e.jsx(Ne,{children:"Make changes to the product details below."})]}),e.jsx(we,{className:"max-h-[60vh] p-1",children:e.jsx("div",{className:"space-y-4 pr-4",children:e.jsxs(xe,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx($,{htmlFor:"productName-edit",children:"Product Name"}),e.jsx(_,{id:"productName-edit",value:a.name,onChange:t=>k("name",t.target.value),placeholder:"Product Name"})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"productDescription-edit",children:"Description"}),e.jsx(ke,{id:"productDescription-edit",value:a.description,onChange:t=>k("description",t.target.value),placeholder:"Product Description",rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs($,{htmlFor:"productPrice-edit",children:["Price (",a.currencyCode||"USD",")"]}),e.jsx(_,{id:"productPrice-edit",type:"number",value:a.price,onChange:t=>k("price",parseFloat(t.target.value)||0),placeholder:"0.00",className:"w-24 text-right"})]}),e.jsx(Q,{value:100,className:"h-2"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx($,{htmlFor:"productCost-edit",children:"Cost"}),e.jsx(_,{id:"productCost-edit",type:"number",value:a.cost,onChange:t=>k("cost",parseFloat(t.target.value)||0),placeholder:"0.00",className:"w-24 text-right"})]}),e.jsx(Q,{value:a.price>0?a.cost/a.price*100:0,className:"h-2 [&>div]:bg-red-500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx($,{htmlFor:"productShipping-edit",children:"Shipping"}),e.jsx(_,{id:"productShipping-edit",type:"number",value:a.shipping,onChange:t=>k("shipping",parseFloat(t.target.value)||0),placeholder:"0.00",className:"w-24 text-right"})]}),e.jsx(Q,{value:a.price>0?a.shipping/a.price*100:0,className:"h-2 [&>div]:bg-orange-500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx($,{children:"Profit"}),e.jsx(_,{value:K.toFixed(2),disabled:!0,className:"w-24 text-right"})]}),e.jsx(Q,{value:W,className:"h-2 [&>div]:bg-green-500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx($,{children:"Profit Margin"}),e.jsx(_,{value:`${W.toFixed(2)}%`,disabled:!0,className:"w-24 text-right"})]}),e.jsx(Q,{value:W,className:"h-2 [&>div]:bg-green-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{children:"Product Images"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(a.images||[]).map((t,s)=>e.jsxs("div",{className:"relative group w-24 h-24 cursor-pointer",onClick:()=>q(t),children:[e.jsx("img",{src:t,alt:`Product image ${s+1}`,className:"w-full h-full object-contain rounded-md border"}),e.jsx(x,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-5 w-5 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:n=>{n.stopPropagation(),Y(s)},children:e.jsx(ae,{className:"h-3 w-3"})})]},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("productImageUpload-edit").click(),children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"})," Upload"]}),e.jsx(_,{id:"productImageUpload-edit",type:"file",accept:"image/*",className:"hidden",onChange:t=>U(t.target.files[0])}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:G,disabled:y||z||!a.name||!a.images||a.images.length===0,children:[z?e.jsx(pe,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(ie,{className:"mr-2 h-4 w-4"}),"More Angles/Context (AI)"]})]})]}),e.jsxs("div",{className:"space-y-3 pt-3 border-t mt-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Product Variants"}),(a.variants||[]).map((t,s)=>e.jsxs(xe,{className:"p-2 space-y-2 bg-muted/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{htmlFor:`variantName-edit-${s}`,className:"text-xs",children:"Option Name"}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>S(s),className:"h-6 w-6",children:e.jsx(ae,{className:"h-3 w-3 text-destructive"})})]}),e.jsx(_,{id:`variantName-edit-${s}`,value:t.name||"",onChange:n=>L(s,n.target.value),placeholder:"e.g., Color, Size",className:"text-sm h-8"}),e.jsx($,{className:"text-xs",children:"Option Values"}),(t.values||[]).map((n,o)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{value:n||"",onChange:b=>C(s,o,b.target.value),placeholder:"e.g., Red",className:"text-sm h-8"}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>M(s,o),className:"h-6 w-6",children:e.jsx(ae,{className:"h-3 w-3 text-destructive"})})]},o)),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>R(s),className:"text-xs h-7",children:[e.jsx(se,{className:"mr-1 h-3 w-3"})," Add Value"]})]},s)),e.jsxs(x,{variant:"outline",onClick:l,className:"w-full text-sm h-8",children:[e.jsx(se,{className:"mr-2 h-4 w-4"})," Add Variant Option"]})]}),e.jsxs("div",{className:"pt-3 border-t mt-3",children:[e.jsx($,{htmlFor:"productInventory-edit",children:"Inventory Count"}),e.jsx(_,{id:"productInventory-edit",type:"number",value:a.inventory_count||"",onChange:t=>k("inventory_count",parseInt(t.target.value)||0),placeholder:"0"})]})]})})}),e.jsxs(Se,{children:[e.jsx(he,{asChild:!0,children:e.jsx(x,{type:"button",variant:"outline",onClick:m,children:"Cancel"})}),e.jsxs(x,{type:"button",onClick:H,disabled:y,children:[y?e.jsx(pe,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Save Changes"]})]})]})}),I&&V&&e.jsx(de,{open:I,onOpenChange:B,children:e.jsxs(ce,{className:"max-w-xl max-h-[80vh]",children:[e.jsxs(me,{children:[e.jsx(ue,{children:"Enlarged Image"}),e.jsx(he,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"absolute top-4 right-4",onClick:()=>B(!1),children:e.jsx(se,{className:"h-4 w-4 rotate-45"})})})]}),e.jsx("div",{className:"flex justify-center items-center p-4",children:e.jsx("img",{src:V,alt:"Enlarged product",className:"max-w-full max-h-[70vh] object-contain"})})]})})]})},ze=({product:N,theme:m,index:i,storeName:j,storeId:g,isPublishedView:d=!1,displayMode:w="grid"})=>{var s,n,o,b,E,c,T,X,J,Z,ne,le,oe;const[r,a]=h.useState(N);h.useEffect(()=>{a(N)},[N]);const{addToCart:v,updateStore:y,currentStore:f}=re(),[z,A]=h.useState(!1),[V,P]=h.useState(!1),[I,B]=h.useState(!1),[u,k]=h.useState(!1),U=!d,Y=p=>typeof p=="string"&&p.startsWith("gid://shopify/"),G=r.id,L=Y(G)?btoa(G):G,C=r.inventory_count,R=p=>{p.stopPropagation(),v(r,g)},M=p=>{p.stopPropagation(),B(!I)},l=(m==null?void 0:m.primaryColor)||"#3B82F6",S={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,delay:i*.07,type:"spring",stiffness:100,damping:15}}},H={hover:{scale:1.05,transition:{duration:.35,ease:"circOut"}},initial:{scale:1}},q=p=>{p.stopPropagation(),p.preventDefault(),k(!0)},K=()=>{k(!1)},W=async p=>{if(g&&G)try{if(await fetch("https://uwbrgokfgelgxeonoqah.supabase.co/functions/v1/manage-product",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("supabase.auth.token")}`},body:JSON.stringify({store_id:g,product_id:G,...p})}),a(O=>({...O,...p})),f&&f.id===g&&f.products){const O=f.products.map(te=>te.id===G?{...te,...p}:te);y(g,{products:O})}else f&&f.id===g&&!f.products&&y(g,{products:[{...r,...p}]});k(!1)}catch(O){console.error("Failed to save product changes:",O)}},t={hidden:{opacity:0,y:8},visible:{opacity:1,y:0,transition:{duration:.25,ease:"easeOut"}}};return w==="list"?e.jsxs(e.Fragment,{children:[e.jsxs(F.div,{variants:S,initial:"hidden",animate:"visible",className:"group bg-white/70 dark:bg-neutral-800/70 backdrop-blur-md rounded-2xl border border-neutral-200/70 dark:border-neutral-700/70 hover:border-primary/40 transition-all duration-300 shadow-sm hover:shadow-xl hover:shadow-primary/10 flex",onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[e.jsxs(ee,{to:`/${j}/product/${L}`,className:"w-1/3 sm:w-40 md:w-48 block relative overflow-hidden rounded-l-2xl bg-neutral-100 dark:bg-neutral-700",children:[" ",(n=(s=r.image)==null?void 0:s.src)!=null&&n.medium||Array.isArray(r.images)&&r.images.length>0&&r.images[0]?e.jsx(F.img,{src:((b=(o=r.image)==null?void 0:o.src)==null?void 0:b.medium)||r.images[0],alt:r.name,className:"w-full h-full object-cover",variants:H,initial:"initial",whileHover:"hover",onLoad:()=>P(!0),animate:V?"visible":"hidden"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-neutral-100 dark:bg-neutral-700 text-neutral-400 dark:text-neutral-500 text-3xl font-semibold",children:((E=r.name)==null?void 0:E.charAt(0))||"?"})]}),e.jsxs("div",{className:"w-2/3 p-4 sm:p-5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{to:`/${j}/product/${L}`,children:[" ",e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-neutral-800 dark:text-white hover:text-primary dark:hover:text-primary-light transition-colors mb-1 line-clamp-2",children:r.name})]}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-xs sm:text-sm mb-2 line-clamp-2 leading-snug",children:r.description}),e.jsx("div",{className:"flex items-center gap-1 mb-1",children:[...Array(5)].map(p=>e.jsx(ge,{className:`w-3.5 h-3.5 ${p<(r.rating||4)?"fill-yellow-400 text-yellow-400":"fill-neutral-300 dark:fill-neutral-600 text-neutral-300 dark:text-neutral-600"}`},p))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"text-lg sm:text-xl font-bold",style:{color:l},children:["$",((c=r.price)==null?void 0:c.toFixed(2))||"0.00"]}),e.jsxs(x,{onClick:R,size:"sm",className:"bg-primary hover:bg-primary/90 text-white border-0 rounded-lg px-3 py-1.5 text-xs sm:text-sm",disabled:C!==void 0&&C<=0,children:[e.jsx($e,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1.5"}),C!==void 0&&C<=0?"Out of Stock":"Add to Cart"]}),U&&e.jsxs(x,{onClick:q,size:"sm",variant:"outline",className:"border-primary/50 text-primary hover:bg-primary/10 rounded-lg px-3 py-1.5 text-xs sm:text-sm ml-2",children:[e.jsx(ve,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1.5"}),"Edit"]})]})]})]}),u&&e.jsx(je,{product:N,isOpen:u,onClose:K,onSave:W,storeId:g,theme:m})]}):e.jsxs(e.Fragment,{children:[e.jsxs(F.div,{variants:S,initial:"hidden",animate:"visible",className:"group relative bg-white/70 dark:bg-neutral-800/70 backdrop-blur-md rounded-2xl overflow-hidden border border-neutral-200/70 dark:border-neutral-700/70 hover:border-primary/40 transition-all duration-300 shadow-sm hover:shadow-xl hover:shadow-primary/10",onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),whileHover:{y:-6},children:[e.jsxs(ee,{to:`/${j}/product/${L}`,className:"block",children:[" ",e.jsxs("div",{className:"aspect-square relative overflow-hidden bg-neutral-100 dark:bg-neutral-700",children:[(X=(T=r.image)==null?void 0:T.src)!=null&&X.medium||Array.isArray(r.images)&&r.images.length>0&&r.images[0]?e.jsx(F.img,{src:((Z=(J=r.image)==null?void 0:J.src)==null?void 0:Z.medium)||r.images[0],alt:r.name,className:"w-full h-full object-cover",variants:H,initial:"initial",whileHover:"hover",onLoad:()=>P(!0),animate:V?"visible":"hidden"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-neutral-100 dark:bg-neutral-700 text-neutral-400 dark:text-neutral-500 text-5xl font-semibold",children:((ne=r.name)==null?void 0:ne.charAt(0))||"?"}),e.jsx(fe,{children:z&&!U&&e.jsxs(F.div,{variants:t,initial:"hidden",animate:"visible",exit:"hidden",className:"absolute top-2.5 right-2.5 flex flex-col gap-1.5 z-10",children:[e.jsx(x,{variant:"outline",size:"icon",className:"h-8 w-8 bg-white/80 dark:bg-neutral-800/80 border-neutral-300/70 dark:border-neutral-600/70 text-neutral-600 dark:text-neutral-300 hover:text-primary dark:hover:text-primary-light hover:border-primary/50 backdrop-blur-sm rounded-lg shadow-sm",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"icon",onClick:M,className:`h-8 w-8 bg-white/80 dark:bg-neutral-800/80 border-neutral-300/70 dark:border-neutral-600/70 text-neutral-600 dark:text-neutral-300 hover:text-red-500 dark:hover:text-red-400 hover:border-red-500/50 backdrop-blur-sm rounded-lg shadow-sm ${I?"text-red-500 dark:text-red-400 border-red-500/50":""}`,children:e.jsx(Fe,{className:`h-4 w-4 transition-colors ${I?"fill-red-500":""}`})})]})}),((le=r.tags)==null?void 0:le.includes("New"))&&e.jsxs(Ge,{variant:"default",className:"absolute top-2.5 left-2.5 bg-primary text-white text-[10px] px-1.5 py-0.5 rounded-full",children:[e.jsx(ie,{className:"w-2.5 h-2.5 mr-1"})," NEW"]})]})]}),e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs(ee,{to:`/${j}/product/${L}`,children:[" ",e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-neutral-800 dark:text-white hover:text-primary dark:hover:text-primary-light transition-colors mb-1 line-clamp-2",children:r.name})]}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-xs sm:text-sm mb-2 line-clamp-2 leading-snug",children:r.description}),e.jsx("div",{className:"flex items-center gap-1 mb-1",children:[...Array(5)].map((p,O)=>e.jsx(ge,{className:`w-3.5 h-3.5 ${O<(r.rating||4)?"fill-yellow-400 text-yellow-400":"fill-neutral-300 dark:fill-neutral-600 text-neutral-300 dark:text-neutral-600"}`},O))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-base sm:text-lg font-bold",style:{color:l},children:["$",((oe=r.price)==null?void 0:oe.toFixed(2))||"N/A"]}),e.jsxs(x,{onClick:R,size:"sm",className:"bg-primary hover:bg-primary/90 text-white dark:bg-neutral-300 dark:text-neutral-800 border-0 rounded-lg px-3 py-1.5 text-xs",disabled:C!==void 0&&C<=0,children:[e.jsx(Ie,{className:"h-3.5 w-3.5 mr-1"}),C!==void 0&&C<=0?"Out of Stock":"Add"]})]}),U&&e.jsxs(x,{onClick:q,variant:"outline",size:"sm",className:"w-full mt-2 border-primary/50 text-primary hover:bg-primary/10 rounded-lg text-xs",children:[e.jsx(ve,{className:"h-3.5 w-3.5 mr-1.5"}),"Edit Product"]})]})]}),u&&e.jsx(je,{product:r,isOpen:u,onClose:K,onSave:W,storeId:g,theme:m})]})},He=({store:N,isPublishedView:m=!1})=>{const{products:i,theme:j,id:g,content:d}=N,{updateStoreTextContent:w,viewMode:r}=re(),[a,v]=h.useState("grid"),[y,f]=h.useState(""),[z,A]=h.useState(i||[]),[V,P]=h.useState(!0),I=(d==null?void 0:d.productGridSectionTitle)||"Our Products",B=(d==null?void 0:d.productGridSectionSubtitle)||"Discover fresh arrivals and top picks, curated just for you.",u=(d==null?void 0:d.productGridBadgeText)||"Handpicked For You",k=(d==null?void 0:d.productGridSearchPlaceholder)||"Search products...",U=(d==null?void 0:d.productGridNoProductsTitle)||"No Products Found",Y=(d==null?void 0:d.productGridNoProductsSubtitle)||'Your search for "{searchTerm}" did not match any products.',G=(d==null?void 0:d.productGridClearSearchButtonText)||"Clear Search",L=(d==null?void 0:d.productGridEmptyStateTitle)||I,C=(d==null?void 0:d.productGridEmptyStateSubtitle)||"Our product lineup is currently being updated. Please check back soon!";h.useEffect(()=>{P(!0);const l=setTimeout(()=>{A(i||[]),P(!1)},300);return()=>clearTimeout(l)},[i]),h.useEffect(()=>{if(!i){A([]);return}let l=i;y.trim()!==""&&(l=l.filter(S=>{var H,q;return((H=S.name)==null?void 0:H.toLowerCase().includes(y.toLowerCase()))||((q=S.description)==null?void 0:q.toLowerCase().includes(y.toLowerCase()))})),A(l)},[y,i]);const R=()=>e.jsxs("div",{className:"bg-white/60 dark:bg-neutral-800/60 backdrop-blur-sm rounded-2xl overflow-hidden border border-neutral-200/60 dark:border-neutral-700/60 animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-neutral-200 dark:bg-neutral-700"}),e.jsxs("div",{className:"p-5 space-y-2.5",children:[e.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-700 rounded-lg w-4/5"}),e.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded-lg w-3/5"}),e.jsx("div",{className:"h-5 bg-primary/20 rounded-lg w-1/3 mt-3"})]})]}),M=(j==null?void 0:j.primaryColor)||"#3B82F6";return!i&&!V?e.jsx("section",{id:`products-${g}`,className:"py-16 md:py-24 bg-neutral-50 dark:bg-neutral-800/90",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 text-center",children:[e.jsx(Ve,{className:"w-12 h-12 mx-auto mb-4",style:{color:M}}),e.jsx(D,{initialText:L,onSave:l=>w("productGridEmptyStateTitle",l),isAdmin:!m&&r==="edit",as:"h2",textClassName:"text-3xl font-bold mb-3 text-neutral-800 dark:text-white",inputClassName:"text-3xl font-bold mb-3 text-neutral-800 dark:text-white bg-transparent",className:"text-3xl font-bold mb-3 text-neutral-800 dark:text-white"}),e.jsx(D,{initialText:C,onSave:l=>w("productGridEmptyStateSubtitle",l),isAdmin:!m&&r==="edit",as:"p",textClassName:"text-neutral-600 dark:text-neutral-400 text-lg",inputClassName:"text-neutral-600 dark:text-neutral-400 text-lg bg-transparent",className:"text-neutral-600 dark:text-neutral-400 text-lg",useTextarea:!0})]})}):e.jsxs("section",{id:`products-${g}`,className:"py-16 md:py-24 bg-neutral-50 dark:bg-neutral-800/90 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-0 w-1/2 h-1/2 bg-gradient-to-br from-primary/5 to-transparent rounded-full -translate-x-1/2 blur-3xl opacity-50 dark:opacity-30"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-1/2 h-1/2 bg-gradient-to-tl from-primary/5 to-transparent rounded-full translate-x-1/2 blur-3xl opacity-50 dark:opacity-30"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:[e.jsxs(F.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},className:"text-center mb-10 md:mb-14",children:[e.jsxs(F.div,{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium mb-4",style:{backgroundColor:`${M}1A`,color:M,border:`1px solid ${M}40`},initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},transition:{delay:.1,duration:.4},children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx(D,{initialText:u,onSave:l=>w("productGridBadgeText",l),isAdmin:!m&&r==="edit",as:"span",textClassName:"",inputClassName:"bg-transparent"})]}),e.jsx(D,{initialText:I,onSave:l=>w("productGridSectionTitle",l),isAdmin:!m&&r==="edit",as:"h2",textClassName:"text-3xl md:text-5xl font-bold tracking-tight mb-3 text-neutral-800 dark:text-white",inputClassName:"text-3xl md:text-5xl font-bold tracking-tight mb-3 text-neutral-800 dark:text-white bg-transparent",className:"text-3xl md:text-5xl font-bold tracking-tight mb-3 text-neutral-800 dark:text-white"}),e.jsx(D,{initialText:B,onSave:l=>w("productGridSectionSubtitle",l),isAdmin:!m&&r==="edit",as:"p",textClassName:"text-neutral-600 dark:text-neutral-300 max-w-xl mx-auto text-md md:text-lg leading-relaxed",inputClassName:"text-neutral-600 dark:text-neutral-300 max-w-xl mx-auto text-md md:text-lg leading-relaxed bg-transparent",className:"text-neutral-600 dark:text-neutral-300 max-w-xl mx-auto text-md md:text-lg leading-relaxed",useTextarea:!0})]}),e.jsxs(F.div,{initial:{opacity:0,y:15},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2,duration:.5},className:"flex flex-col md:flex-row justify-between items-center mb-8 md:mb-10 gap-4",children:[e.jsxs("div",{className:"relative w-full md:max-w-xs",children:[e.jsx(be,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 text-neutral-400 dark:text-neutral-500 h-4 w-4"}),e.jsx(_,{type:"text",placeholder:k,className:"w-full pl-10 pr-4 py-2.5 text-sm bg-white/70 dark:bg-neutral-800/70 backdrop-blur-sm border-neutral-300/70 dark:border-neutral-700/70 rounded-xl focus:ring-primary/30 focus:border-primary/60 transition-colors text-neutral-700 dark:text-neutral-200 placeholder-neutral-500 dark:placeholder-neutral-400",value:y,onChange:l=>f(l.target.value)})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 bg-white/70 dark:bg-neutral-800/70 backdrop-blur-sm rounded-xl p-1 border border-neutral-300/70 dark:border-neutral-700/70",children:[e.jsx(x,{variant:"ghost",size:"icon",className:`h-8 w-8 rounded-lg transition-all duration-200 ${a==="grid"?"bg-primary text-white":"text-neutral-500 dark:text-neutral-400 hover:text-primary dark:hover:text-primary-light hover:bg-neutral-100 dark:hover:bg-neutral-700/50"}`,onClick:()=>v("grid"),title:"Grid View",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",className:`h-8 w-8 rounded-lg transition-all duration-200 ${a==="list"?"bg-primary text-white":"text-neutral-500 dark:text-neutral-400 hover:text-primary dark:hover:text-primary-light hover:bg-neutral-100 dark:hover:bg-neutral-700/50"}`,onClick:()=>v("list"),title:"List View",children:e.jsx(Oe,{className:"h-4 w-4"})})]})})]}),e.jsx(fe,{mode:"wait",children:V?e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:a==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8":"space-y-6",children:Array(a==="grid"?8:3).fill(0).map((l,S)=>e.jsx(R,{},`skeleton-fresh-${S}`))},"loading-grid-fresh"):z.length>0?e.jsx(F.div,{variants:Pe,initial:"hidden",animate:"visible",className:a==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8":"space-y-6",children:z.map((l,S)=>e.jsx(ze,{product:l,theme:j,index:S,storeName:Me(N.name),storeId:g,isPublishedView:m,displayMode:a},l.id||`product-fresh-${S}`))},"product-list-fresh"):e.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(be,{className:"w-10 h-10 text-neutral-400 dark:text-neutral-500 mx-auto mb-3"}),e.jsx(D,{initialText:U,onSave:l=>w("productGridNoProductsTitle",l),isAdmin:!m&&r==="edit",as:"h3",textClassName:"text-xl font-semibold text-neutral-700 dark:text-white mb-2",inputClassName:"text-xl font-semibold text-neutral-700 dark:text-white mb-2 bg-transparent",className:"text-xl font-semibold text-neutral-700 dark:text-white mb-2"}),e.jsx(D,{initialText:Y.replace("{searchTerm}",y),onSave:l=>w("productGridNoProductsSubtitle",l),isAdmin:!m&&r==="edit",as:"p",textClassName:"text-neutral-500 dark:text-neutral-400 text-sm",inputClassName:"text-neutral-500 dark:text-neutral-400 text-sm bg-transparent",className:"text-neutral-500 dark:text-neutral-400 text-sm",useTextarea:!0}),e.jsx(x,{variant:"link",onClick:()=>f(""),className:"text-primary hover:text-primary/80 mt-3 text-sm",children:e.jsx(D,{initialText:G,onSave:l=>w("productGridClearSearchButtonText",l),isAdmin:!m&&r==="edit",as:"span",textClassName:"",inputClassName:"bg-transparent"})})]},"no-products-fresh")})]})]})},Pe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.06}}};export{He as default};
