import{u as O,r as N,j as o,I as u,B as D}from"./index-440cc513.js";import{C as E}from"./CollectionProductsDialog-601dfd33.js";const J=({store:j,isPublishedView:r=!1})=>{var w,C,S;const{updateStoreTextContent:p,viewMode:i,store:v,updateStore:h}=O(),t=v||j,y=((t==null?void 0:t.collections)||[]).slice(0,4),l=((w=t==null?void 0:t.theme)==null?void 0:w.primaryColor)||"#6366F1",d=(e,c=20)=>{if(!e.startsWith("#"))return e;let n=parseInt(e.slice(1),16),a=Math.round(2.55*c),s=(n>>16)-a,m=(n>>8&255)-a,g=(n&255)-a;return s=Math.max(0,s),m=Math.max(0,m),g=Math.max(0,g),"#"+(16777216+s*65536+m*256+g).toString(16).slice(1)},x=d(l,20),k=((C=t==null?void 0:t.content)==null?void 0:C.categoryShowcaseTitle)||"Shop by Collection",T=((S=t==null?void 0:t.content)==null?void 0:S.categoryShowcaseViewProductsButtonText)||"View Products",$=async(e,c)=>{if(!(t!=null&&t.id)||!r&&i!=="edit")return;const n=t.collections.findIndex(s=>s.id===e);if(n===-1){console.error("Collection not found for saving title:",e);return}const a=JSON.parse(JSON.stringify(t.collections));a[n].title=c;try{h?await h(t.id,{collections:a}):console.warn("updateStore function from useStore() is not available. Cannot save collection title directly.")}catch(s){console.error(`Failed to update collection ${e} title:`,s)}},[f,I]=N.useState(null),[M,b]=N.useState(!1),B=e=>{I(e),b(!0)};return y.length?o.jsxs(o.Fragment,{children:[o.jsx("section",{id:`category-showcase-${(t==null?void 0:t.id)||"premium"}`,className:"py-12 md:py-20 bg-gray-50 dark:bg-gray-800",children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsx(u,{initialText:k,onSave:e=>p("categoryShowcaseTitle",e),isAdmin:!r&&i==="edit",as:"h2",textClassName:"text-3xl font-bold text-center mb-10 text-gray-800 dark:text-white premium-font-display",inputClassName:"text-3xl font-bold text-center mb-10 text-gray-800 dark:text-white premium-font-display bg-transparent",className:"text-3xl font-bold text-center mb-10 text-gray-800 dark:text-white premium-font-display"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:y.map((e,c)=>{var n;return o.jsxs("div",{className:"flex flex-col bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300",children:[o.jsx("div",{className:"w-full h-40 bg-gray-200 dark:bg-gray-600 rounded-md mb-4 flex items-center justify-center overflow-hidden",children:(n=e.image)!=null&&n.src?o.jsx("img",{src:e.image.src,alt:e.title||"Collection Image",className:"w-full h-full object-cover"}):o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Collection Image"})}),o.jsx(u,{initialText:e.title||"",placeholder:"Collection Title",onSave:a=>$(e.id,a),isAdmin:!r&&i==="edit",as:"h3",textClassName:"text-xl font-semibold text-gray-700 dark:text-white text-center premium-font-body mb-4",inputClassName:"text-xl font-semibold text-gray-700 dark:text-white text-center premium-font-body mb-4 bg-transparent",className:"text-xl font-semibold text-gray-700 dark:text-white text-center premium-font-body mb-4"}),o.jsx(D,{onClick:()=>B(e),className:"mt-auto w-full text-white premium-font-body",style:{background:`linear-gradient(to right, ${l}, ${x})`},onMouseEnter:a=>a.currentTarget.style.background=`linear-gradient(to right, ${d(l,-10)}, ${d(x,-10)})`,onMouseLeave:a=>a.currentTarget.style.background=`linear-gradient(to right, ${l}, ${x})`,children:o.jsx(u,{initialText:T,onSave:a=>p("categoryShowcaseViewProductsButtonText",a),isAdmin:!r&&i==="edit",as:"span",textClassName:"",inputClassName:"bg-transparent"})})]},e.id||e.title)})})]})}),f&&o.jsx(E,{isOpen:M,onClose:()=>b(!1),collection:f,storeId:t==null?void 0:t.id})]}):null};export{J as default};
