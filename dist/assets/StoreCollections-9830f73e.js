import{u as k,r as y,j as t,m as u,I as f,B as D,d as B}from"./index-8adc253b.js";import{C as M}from"./CollectionProductsDialog-be74b4e7.js";const $=({collection:e,onCollectionClick:c,isAdmin:r,onSaveCollectionText:m,collectionIndex:d})=>{const p="https://images.unsplash.com/photo-1588099768531-a72d4a198538?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNsb3RoaW5nfGVufDB8fDB8fHww&auto=format&fit=crop&w=600&q=60",s=(e==null?void 0:e.name)||"Unnamed Collection",n=(e==null?void 0:e.description)||`Explore our ${s} collection.`,o=(e==null?void 0:e.imageUrl)||p,x=`Image for ${s}`;return t.jsxs(u.div,{whileHover:{y:-5},className:"group relative block overflow-hidden rounded-xl shadow-lg cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onClick:()=>c(e),role:"button",tabIndex:0,onKeyDown:a=>a.key==="Enter"&&c(e),children:[t.jsx("img",{src:o,alt:x,className:"h-72 w-full object-cover transition-transform duration-500 group-hover:scale-105 sm:h-80 lg:h-96",loading:"lazy"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent"}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[t.jsx("h3",{className:"text-2xl font-bold group-hover:underline group-hover:decoration-primary",children:t.jsx(f,{initialText:s,onSave:a=>m(d,"name",a),isAdmin:r,placeholder:"Collection Title",textClassName:"text-2xl font-bold"})}),t.jsx("p",{className:"mt-1 text-sm opacity-90 line-clamp-2",children:t.jsx(f,{initialText:n,onSave:a=>m(d,"description",a),isAdmin:r,placeholder:"Collection Description",useTextarea:!0,textClassName:"text-sm opacity-90"})}),t.jsxs("div",{className:"mt-4 inline-flex items-center text-sm font-medium text-primary group-hover:text-yellow-300 transition-colors",children:["View Products ",t.jsx(B,{className:"ml-1.5 h-4 w-4"})]})]})]})},F=({store:e,isPublishedView:c=!1})=>{const{updateStore:r}=k(),[m,d]=y.useState(!1),[p,s]=y.useState(null),n=e==null?void 0:e.collections,o=e==null?void 0:e.id,x=!c,a=(e==null?void 0:e.content)||{},v=i=>{console.log("Clicked collection:",i),i&&o?(s(i),d(!0)):console.warn("Collection data or store ID is missing for dialog.",{collection:i,storeId:o})},C=()=>{d(!1),s(null)},j=async(i,l)=>{if(o)try{i==="collectionsSectionTitle"&&await r(o,{content:{...a,collectionsSectionTitle:l}})}catch(g){console.error(`Failed to update store ${i}:`,g)}},b=async(i,l,g)=>{if(o&&n&&n[i]){const T=n.map((h,I)=>I===i?{...h,[l]:g}:h);try{await r(o,{collections:T})}catch(h){console.error(`Failed to update collection ${l} at index ${i}:`,h)}}},w=(a==null?void 0:a.collectionsSectionTitle)||"Shop by Collection",N={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},S={hidden:{opacity:0,y:50,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:12}}};return t.jsxs(t.Fragment,{children:[t.jsxs("section",{id:`collections-${(e==null?void 0:e.id)||"featured-collections"}`,className:"container mx-auto px-4 pt-6 pb-12",children:[t.jsx(u.h2,{className:"text-3xl font-bold tracking-tight text-center mb-10 md:mb-12",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6,ease:"easeOut"},children:t.jsx(f,{initialText:w,onSave:i=>j("collectionsSectionTitle",i),isAdmin:x,placeholder:"Section Title",textClassName:"text-3xl font-bold tracking-tight text-center"})}),!n||n.length===0?t.jsxs("div",{className:"text-center py-10",children:[t.jsx("p",{className:"text-muted-foreground",children:"No collections to display yet. Collections will appear here once added!"}),!c&&t.jsx(D,{variant:"outline",className:"mt-4",onClick:()=>console.log("Manage Collections clicked - implement navigation or modal"),children:"Manage Collections"})]}):t.jsx(u.div,{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",variants:N,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},children:n.map((i,l)=>t.jsx(u.div,{variants:S,children:t.jsx($,{collection:i,onCollectionClick:v,isAdmin:x,onSaveCollectionText:b,collectionIndex:l})},i.id||i.name))})]}),p&&o&&t.jsx(M,{isOpen:m,onClose:C,collection:p,storeId:o})]})};export{F as default};
